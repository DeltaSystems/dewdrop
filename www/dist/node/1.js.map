{"version":3,"sources":["webpack:///./www/src/js/sort-fields.js","webpack:///./www/src/js/sort-fields/add-group-popover-template.html","webpack:///./www/src/js/sort-fields/list-field-template.html","webpack:///./www/src/js/sort-fields/list-template.html","webpack:///./www/src/js/sort-fields/add-group-popover-view.js","webpack:///./www/src/js/sort-fields/groups-collection.js","webpack:///./www/src/js/sort-fields/groups-view.js","webpack:///./www/src/js/sort-fields/list-view.js"],"names":["SortFields","collection","popover","groups","initializeWithGlobalVariable","$","on","e","val","JSON","stringify","toJSON","module","exports","AddGroupPopoverView","Backbone","View","extend","el","events","initialize","attributes","options","$el","find","html","placement","content","popoverHtml","setGroups","preventSubmission","preventDefault","focusInput","setTimeout","_","bind","focus","addGroupOnEnter","keyCode","addGroup","add","title","Model","defaults","allowEditing","animate","caption","sortIndex","fields","GroupsCollection","Collection","model","comparator","map","pick","window","initialFieldGroupsConfig","each","group","index","GroupsView","render","hideTitle","length","empty","view","ungroupedModel","first","append","sortable","items","disableSelection","updateSortIndexes","list","get","data","set","sort","listTemplate","template","fieldTemplate","ListView","tagName","className","updateBadge","hide","velocity","remove","cid","connectWith","field","delete","concat","destroy","showTitleInput","show","saveTitleOnEnter","saveTitle","cancelTitleInput","count","suffix","text","updateModelFields","ui","element","push","id","label"],"mappings":"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","file":"1.js","sourcesContent":["import GroupsCollection from './sort-fields/groups-collection';\nimport GroupsView from './sort-fields/groups-view';\nimport Popover from './sort-fields/add-group-popover-view';\n\nclass SortFields {\n    constructor() {\n        var collection = new GroupsCollection(),\n            popover    = new Popover({collection: collection}),\n            groups     = new GroupsView({collection: collection});\n\n        collection.initializeWithGlobalVariable();\n\n        $('#sort-form').on(\n            'submit',\n            function (e) {\n                $('#sorted-fields').val(JSON.stringify(collection.toJSON()));\n            }\n        );\n    }\n}\n\nexport default SortFields;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields.js","module.exports = \"<div class=\\\"form-inline\\\">\\n    <input placeholder=\\\"Enter group title...\\\" type=\\\"text\\\" class=\\\"form-control\\\" />\\n    <button class=\\\"btn btn-success btn-add-group\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n</div>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/add-group-popover-template.html","module.exports = \"<li data-field-id=\\\"<%- id %>\\\" class=\\\"list-group-item\\\">\\n    <span class=\\\"field-label\\\"><%- label %></span>\\n    <span class=\\\"text-muted glyphicon glyphicon-align-justify pull-right\\\"></span>\\n</li>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-field-template.html","module.exports = \"<li class=\\\"list-group-item list-group-item-title\\\">\\n    <span class=\\\"badge\\\">\\n        <%- fields.length %>\\n        <%- (1 === fields.length ? 'Field' : 'Fields') %>\\n    </span>\\n    <h4>\\n        <%- title %>\\n    </h4>\\n    <% if (caption) { %>\\n    <div class=\\\"help-block\\\"><%- caption %></div>\\n    <% } %>\\n    <% if (allowEditing) { %>\\n    <div class=\\\"title-input form-inline\\\">\\n        <input type=\\\"text\\\" class=\\\"title-input form-control\\\" value=\\\"<%- title %>\\\" />\\n        <button type=\\\"button\\\" class=\\\"btn btn-save-title btn-success btn-sm\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-cancel btn-link btn-sm\\\">Cancel</button>\\n    </div>\\n    <div class=\\\"title-buttons\\\">\\n        <a href=\\\"#\\\" class=\\\"btn-remove pull-right btn btn-sm btn-default\\\">\\n            <span class=\\\"glyphicon glyphicon-remove\\\"></span>\\n            Delete Group\\n        </a>\\n        <a href=\\\"#\\\" class=\\\"btn-edit pull-right btn btn-sm btn-success\\\">\\n            <span class=\\\"glyphicon glyphicon-pencil\\\"></span>\\n            Edit Title\\n        </a>\\n    </div>\\n    <% } %>\\n</li>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-template.html","import popoverHtml from './add-group-popover-template.html';\n\nvar AddGroupPopoverView = Backbone.View.extend({\n    el: '#add-group-wrapper',\n\n    events: {\n        'click #add-group':                     'preventSubmission',\n        'show.bs.popover #add-group':           'focusInput',\n        'keydown .popover-content input:first': 'addGroupOnEnter',\n        'click .popover-content .btn':          'addGroup',\n    },\n\n    groups: null,\n\n    initialize: function (attributes, options) {\n        this.$el.find('#add-group').popover(\n            {\n                html:      true,\n                placement: 'top',\n                content:   popoverHtml\n            }\n        );\n    },\n\n    setGroups: function (groups) {\n        this.groups = groups;\n\n        return this;\n    },\n\n    preventSubmission: function (e) {\n        e.preventDefault();\n    },\n\n    focusInput: function (e) {\n        setTimeout(\n            _.bind(\n                function () {\n                    this.$el.find('.popover-content input').focus();\n                },\n                this\n            ),\n            1\n        );\n    },\n\n    addGroupOnEnter: function (e) {\n        if (13 === e.keyCode) {\n            return this.addGroup(e);\n        }\n    },\n\n    addGroup: function (e) {\n        e.preventDefault();\n\n        $('#add-group').popover('hide');\n\n        this.collection.add({\n            title: this.$el.find('.popover-content input').val()\n        });\n    }\n});\n\nexport default AddGroupPopoverView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/add-group-popover-view.js","var Model = Backbone.Model.extend({\n    defaults: {\n        allowEditing: true,\n        animate:      true,\n        title:        '',\n        caption:      '',\n        sortIndex:    null,\n        fields:       []\n    }\n});\n\nvar GroupsCollection = Backbone.Collection.extend({\n    model: Model,\n\n    comparator: 'sortIndex',\n\n    toJSON: function () {\n        return this.map(\n            function (model) {\n                return _.pick(model.toJSON(this), ['title', 'fields'])\n            }\n        );\n    },\n\n    initializeWithGlobalVariable: function () {\n        if ('undefined' === typeof window.initialFieldGroupsConfig) {\n            throw 'Could not find initialFieldGroupsConfig variable in global scope';\n        }\n\n        _.each(\n            window.initialFieldGroupsConfig,\n            function (group, index) {\n                group.allowEditing = true;\n                group.animate      = false;\n                group.sortIndex    = index;\n\n                if (0 === index) {\n                    group.allowEditing = false;\n                }\n\n                this.add(group);\n            },\n            this\n        );\n    }\n});\n\nexport default GroupsCollection;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/groups-collection.js","import List from './list-view';\n\nvar GroupsView = Backbone.View.extend({\n    el: '#groups-wrapper',\n\n    events: {\n        'sortstop': 'updateSortIndexes'\n    },\n\n    initialize: function () {\n        this.collection.on('add remove', this.render, this);\n    },\n\n    render: function () {\n        var hideTitle = (1 === this.collection.length);\n\n        this.$el.empty();\n\n        this.collection.each(\n            function (group, index) {\n                var view = new List({\n                    model:          group,\n                    hideTitle:      hideTitle,\n                    ungroupedModel: this.collection.first()\n                });\n\n                this.$el.append(view.render().el);\n            },\n            this\n        );\n\n        this.$el.sortable({\n            items: 'ul:not(.list-group:first)',\n        }).disableSelection();\n\n        return this;\n    },\n\n    updateSortIndexes: function () {\n        this.$el.find('.list-group').each(\n            _.bind(\n                function (index, list) {\n                    this.collection.get($(list).data('model-id')).set('sortIndex', index);\n                    this.collection.sort();\n                },\n                this\n            )\n        );\n    }\n});\n\nexport default GroupsView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/groups-view.js","import listHtml from './list-template.html';\nimport fieldHtml from './list-field-template.html';\n\nvar listTemplate  = _.template(listHtml),\n    fieldTemplate = _.template(fieldHtml);\n\nvar ListView =Backbone.View.extend({\n    template: listTemplate,\n\n    tagName: 'ul',\n\n    className: 'list-group',\n\n    hideTitle: false,\n\n    events: {\n        'sortstop':              'updateModelFields',\n        'sortremove':            'updateModelFields',\n        'sortreceive':           'updateModelFields',\n        'click .btn-remove':     'delete',\n        'click .btn-edit':       'showTitleInput',\n        'click .btn-save-title': 'saveTitle',\n        'click .btn-cancel':     'cancelTitleInput',\n        'keydown .title-input':  'saveTitleOnEnter'\n    },\n\n    initialize: function (attributes, options) {\n        this.model.on('change:title', this.render, this);\n        this.model.on('change:fields', this.updateBadge, this);\n\n        this.hideTitle      = attributes.hideTitle;\n        this.ungroupedModel = attributes.ungroupedModel;\n    },\n\n    render: function () {\n        var list;\n\n        this.$el.html(this.template(this.model.toJSON()));\n        this.$el.find('.title-input').hide();\n\n        if (this.model.get('animate') && !this.model.get('fields').length) {\n            this.$el.velocity('transition.flipYIn');\n        }\n\n        // We don't want to show the title at all when there is only 1 group\n        if (this.hideTitle) {\n            this.$el.find('.list-group-item-title').remove();\n        }\n\n        this.$el.data('model-id', this.model.cid);\n\n        this.$el.sortable({\n            items:       'li:not(.list-group-item-title)',\n            connectWith: '.list-group'\n        }).disableSelection();\n\n        _.each(\n            this.model.get('fields'),\n            function (field, index) {\n                this.$el.append(fieldTemplate(field));\n            },\n            this\n        );\n\n        return this;\n    },\n\n    delete: function (e) {\n        e.preventDefault();\n\n        // Pass remaining fields over to the \"ungrouped\" set\n        this.ungroupedModel.set(\n            'fields',\n            this.ungroupedModel.get('fields').concat(this.model.get('fields'))\n        );\n\n        this.model.destroy();\n    },\n\n    showTitleInput: function (e) {\n        e.preventDefault();\n\n        this.$el.find('h4').hide();\n        this.$el.find('.title-input').show();\n        this.$el.find('.title-input').focus();\n    },\n\n    saveTitleOnEnter: function (e) {\n        if (13 === e.keyCode) {\n            this.saveTitle(e);\n        }\n    },\n\n    saveTitle: function (e) {\n        e.preventDefault();\n\n        this.model.set('title', this.$el.find('.title-input input').val());\n\n        this.cancelTitleInput(e);\n    },\n\n    cancelTitleInput: function (e) {\n        e.preventDefault();\n\n        this.$el.find('.title-input').hide();\n        this.$el.find('h4').show();\n    },\n\n    updateBadge: function () {\n        var count  = this.model.get('fields').length,\n            suffix = (1 === count ? '' : 's');\n\n        this.$el.find('.badge').text(count + ' Field' + suffix);\n    },\n\n    updateModelFields: function (e, ui) {\n        var fields = [];\n\n        this.$el.find('li:not(.list-group-item-title)').each(\n            function (index, element) {\n                fields.push({\n                    id:        $(element).data('field-id'),\n                    label:     $(element).find('.field-label').text()\n                });\n            }\n        );\n\n        this.model.set('fields', fields);\n    }\n});\n\nexport default ListView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-view.js"],"sourceRoot":""}