{"version":3,"sources":["webpack:///./www/src/js/sort-fields.js","webpack:///./www/src/js/sort-fields/add-group-popover-template.html","webpack:///./www/src/js/sort-fields/list-field-template.html","webpack:///./www/src/js/sort-fields/list-template.html","webpack:///./www/src/js/sort-fields/add-group-popover-view.js","webpack:///./www/src/js/sort-fields/groups-collection.js","webpack:///./www/src/js/sort-fields/groups-view.js","webpack:///./www/src/js/sort-fields/list-view.js"],"names":["SortFields","collection","popover","groups","initializeWithGlobalVariable","$","on","e","val","JSON","stringify","toJSON","module","exports","AddGroupPopoverView","Backbone","View","extend","el","events","initialize","attributes","options","$el","find","html","placement","content","setGroups","preventSubmission","preventDefault","focusInput","setTimeout","_","bind","focus","addGroupOnEnter","keyCode","addGroup","add","title","Model","defaults","allowEditing","animate","caption","sortIndex","fields","GroupsCollection","Collection","model","comparator","map","pick","window","initialFieldGroupsConfig","each","group","index","GroupsView","render","hideTitle","length","empty","view","ungroupedModel","first","append","sortable","items","disableSelection","updateSortIndexes","list","get","data","set","sort","listTemplate","template","fieldTemplate","ListView","tagName","className","updateBadge","hide","velocity","remove","cid","connectWith","field","delete","concat","destroy","showTitleInput","show","saveTitleOnEnter","saveTitle","cancelTitleInput","count","suffix","text","updateModelFields","ui","element","push","id","label"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QAIMA,U,GACF,sBAAc;AAAA;;AACV,YAAIC,aAAa,gCAAjB;AAAA,YACIC,UAAa,kCAAY,EAACD,YAAYA,UAAb,EAAZ,CADjB;AAAA,YAEIE,SAAa,yBAAe,EAACF,YAAYA,UAAb,EAAf,CAFjB;;AAIAA,mBAAWG,4BAAX;;AAEAC,UAAE,YAAF,EAAgBC,EAAhB,CACI,QADJ,EAEI,UAAUC,CAAV,EAAa;AACTF,cAAE,gBAAF,EAAoBG,GAApB,CAAwBC,KAAKC,SAAL,CAAeT,WAAWU,MAAX,EAAf,CAAxB;AACH,SAJL;AAMH,K;;sBAGUX,U;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBfY,SAAOC,OAAP,GAAiB,6OAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;ACAAD,SAAOC,OAAP,GAAiB,+MAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;ACAAD,SAAOC,OAAP,GAAiB,moCAAjB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACEA,QAAIC,sBAAsBC,SAASC,IAAT,CAAcC,MAAd,CAAqB;AAC3CC,YAAI,oBADuC;;AAG3CC,gBAAQ;AACJ,gCAAwC,mBADpC;AAEJ,0CAAwC,YAFpC;AAGJ,oDAAwC,iBAHpC;AAIJ,2CAAwC;AAJpC,SAHmC;;AAU3ChB,gBAAQ,IAVmC;;AAY3CiB,oBAAY,oBAAUC,UAAV,EAAsBC,OAAtB,EAA+B;AACvC,iBAAKC,GAAL,CAASC,IAAT,CAAc,YAAd,EAA4BtB,OAA5B,CACI;AACIuB,sBAAW,IADf;AAEIC,2BAAW,KAFf;AAGIC;AAHJ,aADJ;AAOH,SApB0C;;AAsB3CC,mBAAW,mBAAUzB,MAAV,EAAkB;AACzB,iBAAKA,MAAL,GAAcA,MAAd;;AAEA,mBAAO,IAAP;AACH,SA1B0C;;AA4B3C0B,2BAAmB,2BAAUtB,CAAV,EAAa;AAC5BA,cAAEuB,cAAF;AACH,SA9B0C;;AAgC3CC,oBAAY,oBAAUxB,CAAV,EAAa;AACrByB,uBACIC,EAAEC,IAAF,CACI,YAAY;AACR,qBAAKX,GAAL,CAASC,IAAT,CAAc,wBAAd,EAAwCW,KAAxC;AACH,aAHL,EAII,IAJJ,CADJ,EAOI,CAPJ;AASH,SA1C0C;;AA4C3CC,yBAAiB,yBAAU7B,CAAV,EAAa;AAC1B,gBAAI,OAAOA,EAAE8B,OAAb,EAAsB;AAClB,uBAAO,KAAKC,QAAL,CAAc/B,CAAd,CAAP;AACH;AACJ,SAhD0C;;AAkD3C+B,kBAAU,kBAAU/B,CAAV,EAAa;AACnBA,cAAEuB,cAAF;;AAEAzB,cAAE,YAAF,EAAgBH,OAAhB,CAAwB,MAAxB;;AAEA,iBAAKD,UAAL,CAAgBsC,GAAhB,CAAoB;AAChBC,uBAAO,KAAKjB,GAAL,CAASC,IAAT,CAAc,wBAAd,EAAwChB,GAAxC;AADS,aAApB;AAGH;AA1D0C,KAArB,CAA1B;;sBA6DeM,mB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/Df,QAAI2B,QAAQ1B,SAAS0B,KAAT,CAAexB,MAAf,CAAsB;AAC9ByB,kBAAU;AACNC,0BAAc,IADR;AAENC,qBAAc,IAFR;AAGNJ,mBAAc,EAHR;AAINK,qBAAc,EAJR;AAKNC,uBAAc,IALR;AAMNC,oBAAc;AANR;AADoB,KAAtB,CAAZ;;AAWA,QAAIC,mBAAmBjC,SAASkC,UAAT,CAAoBhC,MAApB,CAA2B;AAC9CiC,eAAOT,KADuC;;AAG9CU,oBAAY,WAHkC;;AAK9CxC,gBAAQ,kBAAY;AAChB,mBAAO,KAAKyC,GAAL,CACH,UAAUF,KAAV,EAAiB;AACb,uBAAOjB,EAAEoB,IAAF,CAAOH,MAAMvC,MAAN,CAAa,IAAb,CAAP,EAA2B,CAAC,OAAD,EAAU,QAAV,CAA3B,CAAP;AACH,aAHE,CAAP;AAKH,SAX6C;;AAa9CP,sCAA8B,wCAAY;AACtC,gBAAI,gBAAgB,OAAOkD,OAAOC,wBAAlC,EAA4D;AACxD,sBAAM,kEAAN;AACH;;AAEDtB,cAAEuB,IAAF,CACIF,OAAOC,wBADX,EAEI,UAAUE,KAAV,EAAiBC,KAAjB,EAAwB;AACpBD,sBAAMd,YAAN,GAAqB,IAArB;AACAc,sBAAMb,OAAN,GAAqB,KAArB;AACAa,sBAAMX,SAAN,GAAqBY,KAArB;;AAEA,oBAAI,MAAMA,KAAV,EAAiB;AACbD,0BAAMd,YAAN,GAAqB,KAArB;AACH;;AAED,qBAAKJ,GAAL,CAASkB,KAAT;AACH,aAZL,EAaI,IAbJ;AAeH;AAjC6C,KAA3B,CAAvB;;sBAoCeT,gB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7Cf,QAAIW,aAAa5C,SAASC,IAAT,CAAcC,MAAd,CAAqB;AAClCC,YAAI,iBAD8B;;AAGlCC,gBAAQ;AACJ,wBAAY;AADR,SAH0B;;AAOlCC,oBAAY,sBAAY;AACpB,iBAAKnB,UAAL,CAAgBK,EAAhB,CAAmB,YAAnB,EAAiC,KAAKsD,MAAtC,EAA8C,IAA9C;AACH,SATiC;;AAWlCA,gBAAQ,kBAAY;AAChB,gBAAIC,YAAa,MAAM,KAAK5D,UAAL,CAAgB6D,MAAvC;;AAEA,iBAAKvC,GAAL,CAASwC,KAAT;;AAEA,iBAAK9D,UAAL,CAAgBuD,IAAhB,CACI,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;AACpB,oBAAIM,OAAO,uBAAS;AAChBd,2BAAgBO,KADA;AAEhBI,+BAAgBA,SAFA;AAGhBI,oCAAgB,KAAKhE,UAAL,CAAgBiE,KAAhB;AAHA,iBAAT,CAAX;;AAMA,qBAAK3C,GAAL,CAAS4C,MAAT,CAAgBH,KAAKJ,MAAL,GAAc1C,EAA9B;AACH,aATL,EAUI,IAVJ;;AAaA,iBAAKK,GAAL,CAAS6C,QAAT,CAAkB;AACdC,uBAAO;AADO,aAAlB,EAEGC,gBAFH;;AAIA,mBAAO,IAAP;AACH,SAlCiC;;AAoClCC,2BAAmB,6BAAY;AAC3B,iBAAKhD,GAAL,CAASC,IAAT,CAAc,aAAd,EAA6BgC,IAA7B,CACIvB,EAAEC,IAAF,CACI,UAAUwB,KAAV,EAAiBc,IAAjB,EAAuB;AACnB,qBAAKvE,UAAL,CAAgBwE,GAAhB,CAAoBpE,EAAEmE,IAAF,EAAQE,IAAR,CAAa,UAAb,CAApB,EAA8CC,GAA9C,CAAkD,WAAlD,EAA+DjB,KAA/D;AACA,qBAAKzD,UAAL,CAAgB2E,IAAhB;AACH,aAJL,EAKI,IALJ,CADJ;AASH;AA9CiC,KAArB,CAAjB;;sBAiDejB,U;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChDf,QAAIkB,eAAgB5C,EAAE6C,QAAF,wBAApB;AAAA,QACIC,gBAAgB9C,EAAE6C,QAAF,6BADpB;;AAGA,QAAIE,WAAUjE,SAASC,IAAT,CAAcC,MAAd,CAAqB;AAC/B6D,kBAAUD,YADqB;;AAG/BI,iBAAS,IAHsB;;AAK/BC,mBAAW,YALoB;;AAO/BrB,mBAAW,KAPoB;;AAS/B1C,gBAAQ;AACJ,wBAAyB,mBADrB;AAEJ,0BAAyB,mBAFrB;AAGJ,2BAAyB,mBAHrB;AAIJ,iCAAyB,QAJrB;AAKJ,+BAAyB,gBALrB;AAMJ,qCAAyB,WANrB;AAOJ,iCAAyB,kBAPrB;AAQJ,oCAAyB;AARrB,SATuB;;AAoB/BC,oBAAY,oBAAUC,UAAV,EAAsBC,OAAtB,EAA+B;AACvC,iBAAK4B,KAAL,CAAW5C,EAAX,CAAc,cAAd,EAA8B,KAAKsD,MAAnC,EAA2C,IAA3C;AACA,iBAAKV,KAAL,CAAW5C,EAAX,CAAc,eAAd,EAA+B,KAAK6E,WAApC,EAAiD,IAAjD;;AAEA,iBAAKtB,SAAL,GAAsBxC,WAAWwC,SAAjC;AACA,iBAAKI,cAAL,GAAsB5C,WAAW4C,cAAjC;AACH,SA1B8B;;AA4B/BL,gBAAQ,kBAAY;AAChB,gBAAIY,IAAJ;;AAEA,iBAAKjD,GAAL,CAASE,IAAT,CAAc,KAAKqD,QAAL,CAAc,KAAK5B,KAAL,CAAWvC,MAAX,EAAd,CAAd;AACA,iBAAKY,GAAL,CAASC,IAAT,CAAc,cAAd,EAA8B4D,IAA9B;;AAEA,gBAAI,KAAKlC,KAAL,CAAWuB,GAAX,CAAe,SAAf,KAA6B,CAAC,KAAKvB,KAAL,CAAWuB,GAAX,CAAe,QAAf,EAAyBX,MAA3D,EAAmE;AAC/D,qBAAKvC,GAAL,CAAS8D,QAAT,CAAkB,oBAAlB;AACH;;AAED;AACA,gBAAI,KAAKxB,SAAT,EAAoB;AAChB,qBAAKtC,GAAL,CAASC,IAAT,CAAc,wBAAd,EAAwC8D,MAAxC;AACH;;AAED,iBAAK/D,GAAL,CAASmD,IAAT,CAAc,UAAd,EAA0B,KAAKxB,KAAL,CAAWqC,GAArC;;AAEA,iBAAKhE,GAAL,CAAS6C,QAAT,CAAkB;AACdC,uBAAa,gCADC;AAEdmB,6BAAa;AAFC,aAAlB,EAGGlB,gBAHH;;AAKArC,cAAEuB,IAAF,CACI,KAAKN,KAAL,CAAWuB,GAAX,CAAe,QAAf,CADJ,EAEI,UAAUgB,KAAV,EAAiB/B,KAAjB,EAAwB;AACpB,qBAAKnC,GAAL,CAAS4C,MAAT,CAAgBY,cAAcU,KAAd,CAAhB;AACH,aAJL,EAKI,IALJ;;AAQA,mBAAO,IAAP;AACH,SA3D8B;;AA6D/BC,gBAAQ,iBAAUnF,CAAV,EAAa;AACjBA,cAAEuB,cAAF;;AAEA;AACA,iBAAKmC,cAAL,CAAoBU,GAApB,CACI,QADJ,EAEI,KAAKV,cAAL,CAAoBQ,GAApB,CAAwB,QAAxB,EAAkCkB,MAAlC,CAAyC,KAAKzC,KAAL,CAAWuB,GAAX,CAAe,QAAf,CAAzC,CAFJ;;AAKA,iBAAKvB,KAAL,CAAW0C,OAAX;AACH,SAvE8B;;AAyE/BC,wBAAgB,wBAAUtF,CAAV,EAAa;AACzBA,cAAEuB,cAAF;;AAEA,iBAAKP,GAAL,CAASC,IAAT,CAAc,IAAd,EAAoB4D,IAApB;AACA,iBAAK7D,GAAL,CAASC,IAAT,CAAc,cAAd,EAA8BsE,IAA9B;AACA,iBAAKvE,GAAL,CAASC,IAAT,CAAc,cAAd,EAA8BW,KAA9B;AACH,SA/E8B;;AAiF/B4D,0BAAkB,0BAAUxF,CAAV,EAAa;AAC3B,gBAAI,OAAOA,EAAE8B,OAAb,EAAsB;AAClB,qBAAK2D,SAAL,CAAezF,CAAf;AACH;AACJ,SArF8B;;AAuF/ByF,mBAAW,mBAAUzF,CAAV,EAAa;AACpBA,cAAEuB,cAAF;;AAEA,iBAAKoB,KAAL,CAAWyB,GAAX,CAAe,OAAf,EAAwB,KAAKpD,GAAL,CAASC,IAAT,CAAc,oBAAd,EAAoChB,GAApC,EAAxB;;AAEA,iBAAKyF,gBAAL,CAAsB1F,CAAtB;AACH,SA7F8B;;AA+F/B0F,0BAAkB,0BAAU1F,CAAV,EAAa;AAC3BA,cAAEuB,cAAF;;AAEA,iBAAKP,GAAL,CAASC,IAAT,CAAc,cAAd,EAA8B4D,IAA9B;AACA,iBAAK7D,GAAL,CAASC,IAAT,CAAc,IAAd,EAAoBsE,IAApB;AACH,SApG8B;;AAsG/BX,qBAAa,uBAAY;AACrB,gBAAIe,QAAS,KAAKhD,KAAL,CAAWuB,GAAX,CAAe,QAAf,EAAyBX,MAAtC;AAAA,gBACIqC,SAAU,MAAMD,KAAN,GAAc,EAAd,GAAmB,GADjC;;AAGA,iBAAK3E,GAAL,CAASC,IAAT,CAAc,QAAd,EAAwB4E,IAAxB,CAA6BF,QAAQ,QAAR,GAAmBC,MAAhD;AACH,SA3G8B;;AA6G/BE,2BAAmB,2BAAU9F,CAAV,EAAa+F,EAAb,EAAiB;AAChC,gBAAIvD,SAAS,EAAb;;AAEA,iBAAKxB,GAAL,CAASC,IAAT,CAAc,gCAAd,EAAgDgC,IAAhD,CACI,UAAUE,KAAV,EAAiB6C,OAAjB,EAA0B;AACtBxD,uBAAOyD,IAAP,CAAY;AACRC,wBAAWpG,EAAEkG,OAAF,EAAW7B,IAAX,CAAgB,UAAhB,CADH;AAERgC,2BAAWrG,EAAEkG,OAAF,EAAW/E,IAAX,CAAgB,cAAhB,EAAgC4E,IAAhC;AAFH,iBAAZ;AAIH,aANL;;AASA,iBAAKlD,KAAL,CAAWyB,GAAX,CAAe,QAAf,EAAyB5B,MAAzB;AACH;AA1H8B,KAArB,CAAd;;sBA6HeiC,Q","file":"1.js","sourcesContent":["import GroupsCollection from './sort-fields/groups-collection';\nimport GroupsView from './sort-fields/groups-view';\nimport Popover from './sort-fields/add-group-popover-view';\n\nclass SortFields {\n    constructor() {\n        var collection = new GroupsCollection(),\n            popover    = new Popover({collection: collection}),\n            groups     = new GroupsView({collection: collection});\n\n        collection.initializeWithGlobalVariable();\n\n        $('#sort-form').on(\n            'submit',\n            function (e) {\n                $('#sorted-fields').val(JSON.stringify(collection.toJSON()));\n            }\n        );\n    }\n}\n\nexport default SortFields;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields.js","module.exports = \"<div class=\\\"form-inline\\\">\\n    <input placeholder=\\\"Enter group title...\\\" type=\\\"text\\\" class=\\\"form-control\\\" />\\n    <button class=\\\"btn btn-success btn-add-group\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n</div>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/add-group-popover-template.html","module.exports = \"<li data-field-id=\\\"<%- id %>\\\" class=\\\"list-group-item\\\">\\n    <span class=\\\"field-label\\\"><%- label %></span>\\n    <span class=\\\"text-muted glyphicon glyphicon-align-justify pull-right\\\"></span>\\n</li>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-field-template.html","module.exports = \"<li class=\\\"list-group-item list-group-item-title\\\">\\n    <span class=\\\"badge\\\">\\n        <%- fields.length %>\\n        <%- (1 === fields.length ? 'Field' : 'Fields') %>\\n    </span>\\n    <h4>\\n        <%- title %>\\n    </h4>\\n    <% if (caption) { %>\\n    <div class=\\\"help-block\\\"><%- caption %></div>\\n    <% } %>\\n    <% if (allowEditing) { %>\\n    <div class=\\\"title-input form-inline\\\">\\n        <input type=\\\"text\\\" class=\\\"title-input form-control\\\" value=\\\"<%- title %>\\\" />\\n        <button type=\\\"button\\\" class=\\\"btn btn-save-title btn-success btn-sm\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-cancel btn-link btn-sm\\\">Cancel</button>\\n    </div>\\n    <div class=\\\"title-buttons\\\">\\n        <a href=\\\"#\\\" class=\\\"btn-remove pull-right btn btn-sm btn-default\\\">\\n            <span class=\\\"glyphicon glyphicon-remove\\\"></span>\\n            Delete Group\\n        </a>\\n        <a href=\\\"#\\\" class=\\\"btn-edit pull-right btn btn-sm btn-success\\\">\\n            <span class=\\\"glyphicon glyphicon-pencil\\\"></span>\\n            Edit Title\\n        </a>\\n    </div>\\n    <% } %>\\n</li>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-template.html","import popoverHtml from './add-group-popover-template.html';\n\nvar AddGroupPopoverView = Backbone.View.extend({\n    el: '#add-group-wrapper',\n\n    events: {\n        'click #add-group':                     'preventSubmission',\n        'show.bs.popover #add-group':           'focusInput',\n        'keydown .popover-content input:first': 'addGroupOnEnter',\n        'click .popover-content .btn':          'addGroup',\n    },\n\n    groups: null,\n\n    initialize: function (attributes, options) {\n        this.$el.find('#add-group').popover(\n            {\n                html:      true,\n                placement: 'top',\n                content:   popoverHtml\n            }\n        );\n    },\n\n    setGroups: function (groups) {\n        this.groups = groups;\n\n        return this;\n    },\n\n    preventSubmission: function (e) {\n        e.preventDefault();\n    },\n\n    focusInput: function (e) {\n        setTimeout(\n            _.bind(\n                function () {\n                    this.$el.find('.popover-content input').focus();\n                },\n                this\n            ),\n            1\n        );\n    },\n\n    addGroupOnEnter: function (e) {\n        if (13 === e.keyCode) {\n            return this.addGroup(e);\n        }\n    },\n\n    addGroup: function (e) {\n        e.preventDefault();\n\n        $('#add-group').popover('hide');\n\n        this.collection.add({\n            title: this.$el.find('.popover-content input').val()\n        });\n    }\n});\n\nexport default AddGroupPopoverView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/add-group-popover-view.js","var Model = Backbone.Model.extend({\n    defaults: {\n        allowEditing: true,\n        animate:      true,\n        title:        '',\n        caption:      '',\n        sortIndex:    null,\n        fields:       []\n    }\n});\n\nvar GroupsCollection = Backbone.Collection.extend({\n    model: Model,\n\n    comparator: 'sortIndex',\n\n    toJSON: function () {\n        return this.map(\n            function (model) {\n                return _.pick(model.toJSON(this), ['title', 'fields'])\n            }\n        );\n    },\n\n    initializeWithGlobalVariable: function () {\n        if ('undefined' === typeof window.initialFieldGroupsConfig) {\n            throw 'Could not find initialFieldGroupsConfig variable in global scope';\n        }\n\n        _.each(\n            window.initialFieldGroupsConfig,\n            function (group, index) {\n                group.allowEditing = true;\n                group.animate      = false;\n                group.sortIndex    = index;\n\n                if (0 === index) {\n                    group.allowEditing = false;\n                }\n\n                this.add(group);\n            },\n            this\n        );\n    }\n});\n\nexport default GroupsCollection;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/groups-collection.js","import List from './list-view';\n\nvar GroupsView = Backbone.View.extend({\n    el: '#groups-wrapper',\n\n    events: {\n        'sortstop': 'updateSortIndexes'\n    },\n\n    initialize: function () {\n        this.collection.on('add remove', this.render, this);\n    },\n\n    render: function () {\n        var hideTitle = (1 === this.collection.length);\n\n        this.$el.empty();\n\n        this.collection.each(\n            function (group, index) {\n                var view = new List({\n                    model:          group,\n                    hideTitle:      hideTitle,\n                    ungroupedModel: this.collection.first()\n                });\n\n                this.$el.append(view.render().el);\n            },\n            this\n        );\n\n        this.$el.sortable({\n            items: 'ul:not(.list-group:first)',\n        }).disableSelection();\n\n        return this;\n    },\n\n    updateSortIndexes: function () {\n        this.$el.find('.list-group').each(\n            _.bind(\n                function (index, list) {\n                    this.collection.get($(list).data('model-id')).set('sortIndex', index);\n                    this.collection.sort();\n                },\n                this\n            )\n        );\n    }\n});\n\nexport default GroupsView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/groups-view.js","import listHtml from './list-template.html';\nimport fieldHtml from './list-field-template.html';\n\nvar listTemplate  = _.template(listHtml),\n    fieldTemplate = _.template(fieldHtml);\n\nvar ListView =Backbone.View.extend({\n    template: listTemplate,\n\n    tagName: 'ul',\n\n    className: 'list-group',\n\n    hideTitle: false,\n\n    events: {\n        'sortstop':              'updateModelFields',\n        'sortremove':            'updateModelFields',\n        'sortreceive':           'updateModelFields',\n        'click .btn-remove':     'delete',\n        'click .btn-edit':       'showTitleInput',\n        'click .btn-save-title': 'saveTitle',\n        'click .btn-cancel':     'cancelTitleInput',\n        'keydown .title-input':  'saveTitleOnEnter'\n    },\n\n    initialize: function (attributes, options) {\n        this.model.on('change:title', this.render, this);\n        this.model.on('change:fields', this.updateBadge, this);\n\n        this.hideTitle      = attributes.hideTitle;\n        this.ungroupedModel = attributes.ungroupedModel;\n    },\n\n    render: function () {\n        var list;\n\n        this.$el.html(this.template(this.model.toJSON()));\n        this.$el.find('.title-input').hide();\n\n        if (this.model.get('animate') && !this.model.get('fields').length) {\n            this.$el.velocity('transition.flipYIn');\n        }\n\n        // We don't want to show the title at all when there is only 1 group\n        if (this.hideTitle) {\n            this.$el.find('.list-group-item-title').remove();\n        }\n\n        this.$el.data('model-id', this.model.cid);\n\n        this.$el.sortable({\n            items:       'li:not(.list-group-item-title)',\n            connectWith: '.list-group'\n        }).disableSelection();\n\n        _.each(\n            this.model.get('fields'),\n            function (field, index) {\n                this.$el.append(fieldTemplate(field));\n            },\n            this\n        );\n\n        return this;\n    },\n\n    delete: function (e) {\n        e.preventDefault();\n\n        // Pass remaining fields over to the \"ungrouped\" set\n        this.ungroupedModel.set(\n            'fields',\n            this.ungroupedModel.get('fields').concat(this.model.get('fields'))\n        );\n\n        this.model.destroy();\n    },\n\n    showTitleInput: function (e) {\n        e.preventDefault();\n\n        this.$el.find('h4').hide();\n        this.$el.find('.title-input').show();\n        this.$el.find('.title-input').focus();\n    },\n\n    saveTitleOnEnter: function (e) {\n        if (13 === e.keyCode) {\n            this.saveTitle(e);\n        }\n    },\n\n    saveTitle: function (e) {\n        e.preventDefault();\n\n        this.model.set('title', this.$el.find('.title-input input').val());\n\n        this.cancelTitleInput(e);\n    },\n\n    cancelTitleInput: function (e) {\n        e.preventDefault();\n\n        this.$el.find('.title-input').hide();\n        this.$el.find('h4').show();\n    },\n\n    updateBadge: function () {\n        var count  = this.model.get('fields').length,\n            suffix = (1 === count ? '' : 's');\n\n        this.$el.find('.badge').text(count + ' Field' + suffix);\n    },\n\n    updateModelFields: function (e, ui) {\n        var fields = [];\n\n        this.$el.find('li:not(.list-group-item-title)').each(\n            function (index, element) {\n                fields.push({\n                    id:        $(element).data('field-id'),\n                    label:     $(element).find('.field-label').text()\n                });\n            }\n        );\n\n        this.model.set('fields', fields);\n    }\n});\n\nexport default ListView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-view.js"],"sourceRoot":""}