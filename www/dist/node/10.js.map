{"version":3,"sources":["webpack:///./www/src/js/listing-sortable.js"],"names":["ListingSortable","sortableListings","$","each","submitUrl","data","tableBody","find","save","sortedIds","index","span","push","ajax","type","sort_order","success","response","result","alert","error","sortable","placeholder","forcePlaceholderSize","handle","stop","e","ui","helper","children","width"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QACMA,e,GACF,2BAAc;AAAA;;AACV,YAAIC,mBAAmBC,EAAE,oCAAF,CAAvB;;AAEAD,yBAAiBE,IAAjB,CACI,YAAY;AACR,gBAAIC,YAAYF,EAAE,IAAF,EAAQG,IAAR,CAAa,UAAb,CAAhB;AAAA,gBACIC,YAAYJ,EAAE,IAAF,EAAQK,IAAR,CAAa,OAAb,CADhB;;AAGA,gBAAIC,OAAO,SAAPA,IAAO,GAAY;AACnB,oBAAIC,YAAY,EAAhB;;AAEAH,0BAAUC,IAAV,CAAe,kBAAf,EAAmCJ,IAAnC,CACI,UAAUO,KAAV,EAAiBC,IAAjB,EAAuB;AACnBF,8BAAUG,IAAV,CAAeV,EAAES,IAAF,EAAQN,IAAR,CAAa,IAAb,CAAf;AACH,iBAHL;;AAMAH,kBAAEW,IAAF,CACIT,SADJ,EAEI;AACIU,0BAAM,MADV;AAEIT,0BAAM;AACFU,oCAAYN;AADV,qBAFV;AAKIO,6BAAS,iBAAUC,QAAV,EAAoB;AACzB,4BAAI,CAACA,SAASC,MAAV,IAAoB,cAAcD,SAASC,MAA/C,EAAuD;AACnDC,kCAAM,8CAAN;AACH;AACJ,qBATL;AAUIC,2BAAO,iBAAY;AACfD,8BAAM,8CAAN;AACH;AAZL,iBAFJ;AAiBH,aA1BD;;AA4BAb,sBAAUe,QAAV,CAAmB;AACfC,6BAAa,YADE;AAEfC,sCAAsB,IAFP;AAGfC,wBAAQ,SAHO;AAIfC,sBAAM,cAAUC,CAAV,EAAaC,EAAb,EAAiB;AACnBnB;AACH,iBANc;AAOfoB,wBAAQ,gBAAUF,CAAV,EAAaC,EAAb,EAAiB;AACrBA,uBAAGE,QAAH,GAAc1B,IAAd,CACI,YAAW;AACPD,0BAAE,IAAF,EAAQ4B,KAAR,CAAc5B,EAAE,IAAF,EAAQ4B,KAAR,EAAd;AACH,qBAHL;;AAMA,2BAAOH,EAAP;AACH;AAfc,aAAnB;AAiBH,SAlDL;AAoDH,K;;sBAGU3B,e","file":"10.js","sourcesContent":["\nclass ListingSortable {\n    constructor() {\n        var sortableListings = $('[data-dewdrop~=\"listing-sortable\"]');\n\n        sortableListings.each(\n            function () {\n                var submitUrl = $(this).data('sort-url'),\n                    tableBody = $(this).find('tbody');\n\n                var save = function () {\n                    var sortedIds = [];\n\n                    tableBody.find('td span[data-id]').each(\n                        function (index, span) {\n                            sortedIds.push($(span).data('id'));\n                        }\n                    );\n\n                    $.ajax(\n                        submitUrl,\n                        {\n                            type: 'POST',\n                            data: {\n                                sort_order: sortedIds\n                            },\n                            success: function (response) {\n                                if (!response.result || 'success' !== response.result) {\n                                    alert('Could not save sort order.  Please try again');\n                                }\n                            },\n                            error: function () {\n                                alert('Unexpected error occurred.  Please try again');\n                            }\n                        }\n                    );\n                };\n\n                tableBody.sortable({\n                    placeholder: 'alert-info',\n                    forcePlaceholderSize: true,\n                    handle: '.handle',\n                    stop: function (e, ui) {\n                        save();\n                    },\n                    helper: function (e, ui) {\n                        ui.children().each(\n                            function() {\n                                $(this).width($(this).width());\n                            }\n                        );\n\n                        return ui;\n                    }\n                });\n            }\n        );\n    }\n}\n\nexport default ListingSortable;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/listing-sortable.js"],"sourceRoot":""}