{"version":3,"sources":["webpack:///./www/src/js/listing-sortable.js"],"names":["ListingSortable","sortableListings","$","each","submitUrl","data","tableBody","find","save","sortedIds","index","span","push","ajax","type","sort_order","success","response","result","alert","error","sortable","placeholder","forcePlaceholderSize","handle","stop","e","ui","helper","children","width"],"mappings":";;;;;;;;;;IACMA,e,GACF,2BAAc;AAAA;;AACV,QAAIC,mBAAmBC,EAAE,oCAAF,CAAvB;;AAEAD,qBAAiBE,IAAjB,CACI,YAAY;AACR,YAAIC,YAAYF,EAAE,IAAF,EAAQG,IAAR,CAAa,UAAb,CAAhB;AAAA,YACIC,YAAYJ,EAAE,IAAF,EAAQK,IAAR,CAAa,OAAb,CADhB;;AAGA,YAAIC,OAAO,SAAPA,IAAO,GAAY;AACnB,gBAAIC,YAAY,EAAhB;;AAEAH,sBAAUC,IAAV,CAAe,kBAAf,EAAmCJ,IAAnC,CACI,UAAUO,KAAV,EAAiBC,IAAjB,EAAuB;AACnBF,0BAAUG,IAAV,CAAeV,EAAES,IAAF,EAAQN,IAAR,CAAa,IAAb,CAAf;AACH,aAHL;;AAMAH,cAAEW,IAAF,CACIT,SADJ,EAEI;AACIU,sBAAM,MADV;AAEIT,sBAAM;AACFU,gCAAYN;AADV,iBAFV;AAKIO,yBAAS,iBAAUC,QAAV,EAAoB;AACzB,wBAAI,CAACA,SAASC,MAAV,IAAoB,cAAcD,SAASC,MAA/C,EAAuD;AACnDC,8BAAM,8CAAN;AACH;AACJ,iBATL;AAUIC,uBAAO,iBAAY;AACfD,0BAAM,8CAAN;AACH;AAZL,aAFJ;AAiBH,SA1BD;;AA4BAb,kBAAUe,QAAV,CAAmB;AACfC,yBAAa,YADE;AAEfC,kCAAsB,IAFP;AAGfC,oBAAQ,SAHO;AAIfC,kBAAM,cAAUC,CAAV,EAAaC,EAAb,EAAiB;AACnBnB;AACH,aANc;AAOfoB,oBAAQ,gBAAUF,CAAV,EAAaC,EAAb,EAAiB;AACrBA,mBAAGE,QAAH,GAAc1B,IAAd,CACI,YAAW;AACPD,sBAAE,IAAF,EAAQ4B,KAAR,CAAc5B,EAAE,IAAF,EAAQ4B,KAAR,EAAd;AACH,iBAHL;;AAMA,uBAAOH,EAAP;AACH;AAfc,SAAnB;AAiBH,KAlDL;AAoDH,C;;AAGL,+DAAe3B,eAAf,E","file":"10.js","sourcesContent":["\nclass ListingSortable {\n    constructor() {\n        var sortableListings = $('[data-dewdrop~=\"listing-sortable\"]');\n\n        sortableListings.each(\n            function () {\n                var submitUrl = $(this).data('sort-url'),\n                    tableBody = $(this).find('tbody');\n\n                var save = function () {\n                    var sortedIds = [];\n\n                    tableBody.find('td span[data-id]').each(\n                        function (index, span) {\n                            sortedIds.push($(span).data('id'));\n                        }\n                    );\n\n                    $.ajax(\n                        submitUrl,\n                        {\n                            type: 'POST',\n                            data: {\n                                sort_order: sortedIds\n                            },\n                            success: function (response) {\n                                if (!response.result || 'success' !== response.result) {\n                                    alert('Could not save sort order.  Please try again');\n                                }\n                            },\n                            error: function () {\n                                alert('Unexpected error occurred.  Please try again');\n                            }\n                        }\n                    );\n                };\n\n                tableBody.sortable({\n                    placeholder: 'alert-info',\n                    forcePlaceholderSize: true,\n                    handle: '.handle',\n                    stop: function (e, ui) {\n                        save();\n                    },\n                    helper: function (e, ui) {\n                        ui.children().each(\n                            function() {\n                                $(this).width($(this).width());\n                            }\n                        );\n\n                        return ui;\n                    }\n                });\n            }\n        );\n    }\n}\n\nexport default ListingSortable;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/listing-sortable.js"],"sourceRoot":""}