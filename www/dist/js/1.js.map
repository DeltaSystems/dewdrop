{"version":3,"sources":["webpack:///1.js","webpack:///./www/src/js/sort-fields.js","webpack:///./www/src/js/sort-fields/add-group-popover-template.html","webpack:///./www/src/js/sort-fields/list-field-template.html","webpack:///./www/src/js/sort-fields/list-template.html","webpack:///./www/src/js/sort-fields/add-group-popover-view.js","webpack:///./www/src/js/sort-fields/groups-collection.js","webpack:///./www/src/js/sort-fields/groups-view.js","webpack:///./www/src/js/sort-fields/list-view.js"],"names":["webpackJsonp","135","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__sort_fields_groups_collection__","__WEBPACK_IMPORTED_MODULE_1__sort_fields_groups_view__","__WEBPACK_IMPORTED_MODULE_2__sort_fields_add_group_popover_view__","SortFields","this","collection","initializeWithGlobalVariable","$","on","e","val","JSON","stringify","toJSON","153","exports","154","155","168","__WEBPACK_IMPORTED_MODULE_0__add_group_popover_template_html__","__WEBPACK_IMPORTED_MODULE_0__add_group_popover_template_html___default","n","AddGroupPopoverView","Backbone","View","extend","el","events","click #add-group","show.bs.popover #add-group","keydown .popover-content input:first","click .popover-content .btn","groups","initialize","attributes","options","$el","find","popover","html","placement","content","a","setGroups","preventSubmission","preventDefault","focusInput","setTimeout","_","bind","focus","addGroupOnEnter","keyCode","addGroup","add","title","169","Model","defaults","allowEditing","animate","caption","sortIndex","fields","GroupsCollection","Collection","model","comparator","map","pick","window","initialFieldGroupsConfig","each","group","index","170","__WEBPACK_IMPORTED_MODULE_0__list_view__","GroupsView","sortstop","render","hideTitle","length","empty","view","ungroupedModel","first","append","sortable","items","disableSelection","updateSortIndexes","list","get","data","set","sort","171","__WEBPACK_IMPORTED_MODULE_0__list_template_html__","__WEBPACK_IMPORTED_MODULE_0__list_template_html___default","__WEBPACK_IMPORTED_MODULE_1__list_field_template_html__","__WEBPACK_IMPORTED_MODULE_1__list_field_template_html___default","listTemplate","template","fieldTemplate","ListView","tagName","className","sortremove","sortreceive","click .btn-remove","click .btn-edit","click .btn-save-title","click .btn-cancel","keydown .title-input","updateBadge","hide","velocity","remove","cid","connectWith","field","delete","concat","destroy","showTitleInput","show","saveTitleOnEnter","saveTitle","cancelTitleInput","count","suffix","text","updateModelFields","ui","element","push","id","label"],"mappings":"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","file":"1.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 135:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__sort_fields_groups_collection__ = __webpack_require__(169);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__sort_fields_groups_view__ = __webpack_require__(170);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__sort_fields_add_group_popover_view__ = __webpack_require__(168);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\nvar SortFields = function SortFields() {\n    _classCallCheck(this, SortFields);\n\n    var collection = new __WEBPACK_IMPORTED_MODULE_0__sort_fields_groups_collection__[\"a\" /* default */](),\n        popover = new __WEBPACK_IMPORTED_MODULE_2__sort_fields_add_group_popover_view__[\"a\" /* default */]({ collection: collection }),\n        groups = new __WEBPACK_IMPORTED_MODULE_1__sort_fields_groups_view__[\"a\" /* default */]({ collection: collection });\n\n    collection.initializeWithGlobalVariable();\n\n    $('#sort-form').on('submit', function (e) {\n        $('#sorted-fields').val(JSON.stringify(collection.toJSON()));\n    });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (SortFields);\n\n/***/ }),\n\n/***/ 153:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<div class=\\\"form-inline\\\">\\n    <input placeholder=\\\"Enter group title...\\\" type=\\\"text\\\" class=\\\"form-control\\\" />\\n    <button class=\\\"btn btn-success btn-add-group\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n</div>\\n\";\n\n/***/ }),\n\n/***/ 154:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<li data-field-id=\\\"<%- id %>\\\" class=\\\"list-group-item\\\">\\n    <span class=\\\"field-label\\\"><%- label %></span>\\n    <span class=\\\"text-muted glyphicon glyphicon-align-justify pull-right\\\"></span>\\n</li>\\n\";\n\n/***/ }),\n\n/***/ 155:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<li class=\\\"list-group-item list-group-item-title\\\">\\n    <span class=\\\"badge\\\">\\n        <%- fields.length %>\\n        <%- (1 === fields.length ? 'Field' : 'Fields') %>\\n    </span>\\n    <h4>\\n        <%- title %>\\n    </h4>\\n    <% if (caption) { %>\\n    <div class=\\\"help-block\\\"><%- caption %></div>\\n    <% } %>\\n    <% if (allowEditing) { %>\\n    <div class=\\\"title-input form-inline\\\">\\n        <input type=\\\"text\\\" class=\\\"title-input form-control\\\" value=\\\"<%- title %>\\\" />\\n        <button type=\\\"button\\\" class=\\\"btn btn-save-title btn-success btn-sm\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-cancel btn-link btn-sm\\\">Cancel</button>\\n    </div>\\n    <div class=\\\"title-buttons\\\">\\n        <a href=\\\"#\\\" class=\\\"btn-remove pull-right btn btn-sm btn-default\\\">\\n            <span class=\\\"glyphicon glyphicon-remove\\\"></span>\\n            Delete Group\\n        </a>\\n        <a href=\\\"#\\\" class=\\\"btn-edit pull-right btn btn-sm btn-success\\\">\\n            <span class=\\\"glyphicon glyphicon-pencil\\\"></span>\\n            Edit Title\\n        </a>\\n    </div>\\n    <% } %>\\n</li>\\n\";\n\n/***/ }),\n\n/***/ 168:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__add_group_popover_template_html__ = __webpack_require__(153);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__add_group_popover_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__add_group_popover_template_html__);\n\n\nvar AddGroupPopoverView = Backbone.View.extend({\n    el: '#add-group-wrapper',\n\n    events: {\n        'click #add-group': 'preventSubmission',\n        'show.bs.popover #add-group': 'focusInput',\n        'keydown .popover-content input:first': 'addGroupOnEnter',\n        'click .popover-content .btn': 'addGroup'\n    },\n\n    groups: null,\n\n    initialize: function initialize(attributes, options) {\n        this.$el.find('#add-group').popover({\n            html: true,\n            placement: 'top',\n            content: __WEBPACK_IMPORTED_MODULE_0__add_group_popover_template_html___default.a\n        });\n    },\n\n    setGroups: function setGroups(groups) {\n        this.groups = groups;\n\n        return this;\n    },\n\n    preventSubmission: function preventSubmission(e) {\n        e.preventDefault();\n    },\n\n    focusInput: function focusInput(e) {\n        setTimeout(_.bind(function () {\n            this.$el.find('.popover-content input').focus();\n        }, this), 1);\n    },\n\n    addGroupOnEnter: function addGroupOnEnter(e) {\n        if (13 === e.keyCode) {\n            return this.addGroup(e);\n        }\n    },\n\n    addGroup: function addGroup(e) {\n        e.preventDefault();\n\n        $('#add-group').popover('hide');\n\n        this.collection.add({\n            title: this.$el.find('.popover-content input').val()\n        });\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AddGroupPopoverView);\n\n/***/ }),\n\n/***/ 169:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar Model = Backbone.Model.extend({\n    defaults: {\n        allowEditing: true,\n        animate: true,\n        title: '',\n        caption: '',\n        sortIndex: null,\n        fields: []\n    }\n});\n\nvar GroupsCollection = Backbone.Collection.extend({\n    model: Model,\n\n    comparator: 'sortIndex',\n\n    toJSON: function toJSON() {\n        return this.map(function (model) {\n            return _.pick(model.toJSON(this), ['title', 'fields']);\n        });\n    },\n\n    initializeWithGlobalVariable: function initializeWithGlobalVariable() {\n        if ('undefined' === typeof window.initialFieldGroupsConfig) {\n            throw 'Could not find initialFieldGroupsConfig variable in global scope';\n        }\n\n        _.each(window.initialFieldGroupsConfig, function (group, index) {\n            group.allowEditing = true;\n            group.animate = false;\n            group.sortIndex = index;\n\n            if (0 === index) {\n                group.allowEditing = false;\n            }\n\n            this.add(group);\n        }, this);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GroupsCollection);\n\n/***/ }),\n\n/***/ 170:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__list_view__ = __webpack_require__(171);\n\n\nvar GroupsView = Backbone.View.extend({\n    el: '#groups-wrapper',\n\n    events: {\n        'sortstop': 'updateSortIndexes'\n    },\n\n    initialize: function initialize() {\n        this.collection.on('add remove', this.render, this);\n    },\n\n    render: function render() {\n        var hideTitle = 1 === this.collection.length;\n\n        this.$el.empty();\n\n        this.collection.each(function (group, index) {\n            var view = new __WEBPACK_IMPORTED_MODULE_0__list_view__[\"a\" /* default */]({\n                model: group,\n                hideTitle: hideTitle,\n                ungroupedModel: this.collection.first()\n            });\n\n            this.$el.append(view.render().el);\n        }, this);\n\n        this.$el.sortable({\n            items: 'ul:not(.list-group:first)'\n        }).disableSelection();\n\n        return this;\n    },\n\n    updateSortIndexes: function updateSortIndexes() {\n        this.$el.find('.list-group').each(_.bind(function (index, list) {\n            this.collection.get($(list).data('model-id')).set('sortIndex', index);\n            this.collection.sort();\n        }, this));\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GroupsView);\n\n/***/ }),\n\n/***/ 171:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__list_template_html__ = __webpack_require__(155);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__list_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__list_template_html__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__list_field_template_html__ = __webpack_require__(154);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__list_field_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__list_field_template_html__);\n\n\n\nvar listTemplate = _.template(__WEBPACK_IMPORTED_MODULE_0__list_template_html___default.a),\n    fieldTemplate = _.template(__WEBPACK_IMPORTED_MODULE_1__list_field_template_html___default.a);\n\nvar ListView = Backbone.View.extend({\n    template: listTemplate,\n\n    tagName: 'ul',\n\n    className: 'list-group',\n\n    hideTitle: false,\n\n    events: {\n        'sortstop': 'updateModelFields',\n        'sortremove': 'updateModelFields',\n        'sortreceive': 'updateModelFields',\n        'click .btn-remove': 'delete',\n        'click .btn-edit': 'showTitleInput',\n        'click .btn-save-title': 'saveTitle',\n        'click .btn-cancel': 'cancelTitleInput',\n        'keydown .title-input': 'saveTitleOnEnter'\n    },\n\n    initialize: function initialize(attributes, options) {\n        this.model.on('change:title', this.render, this);\n        this.model.on('change:fields', this.updateBadge, this);\n\n        this.hideTitle = attributes.hideTitle;\n        this.ungroupedModel = attributes.ungroupedModel;\n    },\n\n    render: function render() {\n        var list;\n\n        this.$el.html(this.template(this.model.toJSON()));\n        this.$el.find('.title-input').hide();\n\n        if (this.model.get('animate') && !this.model.get('fields').length) {\n            this.$el.velocity('transition.flipYIn');\n        }\n\n        // We don't want to show the title at all when there is only 1 group\n        if (this.hideTitle) {\n            this.$el.find('.list-group-item-title').remove();\n        }\n\n        this.$el.data('model-id', this.model.cid);\n\n        this.$el.sortable({\n            items: 'li:not(.list-group-item-title)',\n            connectWith: '.list-group'\n        }).disableSelection();\n\n        _.each(this.model.get('fields'), function (field, index) {\n            this.$el.append(fieldTemplate(field));\n        }, this);\n\n        return this;\n    },\n\n    delete: function _delete(e) {\n        e.preventDefault();\n\n        // Pass remaining fields over to the \"ungrouped\" set\n        this.ungroupedModel.set('fields', this.ungroupedModel.get('fields').concat(this.model.get('fields')));\n\n        this.model.destroy();\n    },\n\n    showTitleInput: function showTitleInput(e) {\n        e.preventDefault();\n\n        this.$el.find('h4').hide();\n        this.$el.find('.title-input').show();\n        this.$el.find('.title-input').focus();\n    },\n\n    saveTitleOnEnter: function saveTitleOnEnter(e) {\n        if (13 === e.keyCode) {\n            this.saveTitle(e);\n        }\n    },\n\n    saveTitle: function saveTitle(e) {\n        e.preventDefault();\n\n        this.model.set('title', this.$el.find('.title-input input').val());\n\n        this.cancelTitleInput(e);\n    },\n\n    cancelTitleInput: function cancelTitleInput(e) {\n        e.preventDefault();\n\n        this.$el.find('.title-input').hide();\n        this.$el.find('h4').show();\n    },\n\n    updateBadge: function updateBadge() {\n        var count = this.model.get('fields').length,\n            suffix = 1 === count ? '' : 's';\n\n        this.$el.find('.badge').text(count + ' Field' + suffix);\n    },\n\n    updateModelFields: function updateModelFields(e, ui) {\n        var fields = [];\n\n        this.$el.find('li:not(.list-group-item-title)').each(function (index, element) {\n            fields.push({\n                id: $(element).data('field-id'),\n                label: $(element).find('.field-label').text()\n            });\n        });\n\n        this.model.set('fields', fields);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ListView);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.js","import GroupsCollection from './sort-fields/groups-collection';\nimport GroupsView from './sort-fields/groups-view';\nimport Popover from './sort-fields/add-group-popover-view';\n\nclass SortFields {\n    constructor() {\n        var collection = new GroupsCollection(),\n            popover    = new Popover({collection: collection}),\n            groups     = new GroupsView({collection: collection});\n\n        collection.initializeWithGlobalVariable();\n\n        $('#sort-form').on(\n            'submit',\n            function (e) {\n                $('#sorted-fields').val(JSON.stringify(collection.toJSON()));\n            }\n        );\n    }\n}\n\nexport default SortFields;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields.js","module.exports = \"<div class=\\\"form-inline\\\">\\n    <input placeholder=\\\"Enter group title...\\\" type=\\\"text\\\" class=\\\"form-control\\\" />\\n    <button class=\\\"btn btn-success btn-add-group\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n</div>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/add-group-popover-template.html","module.exports = \"<li data-field-id=\\\"<%- id %>\\\" class=\\\"list-group-item\\\">\\n    <span class=\\\"field-label\\\"><%- label %></span>\\n    <span class=\\\"text-muted glyphicon glyphicon-align-justify pull-right\\\"></span>\\n</li>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-field-template.html","module.exports = \"<li class=\\\"list-group-item list-group-item-title\\\">\\n    <span class=\\\"badge\\\">\\n        <%- fields.length %>\\n        <%- (1 === fields.length ? 'Field' : 'Fields') %>\\n    </span>\\n    <h4>\\n        <%- title %>\\n    </h4>\\n    <% if (caption) { %>\\n    <div class=\\\"help-block\\\"><%- caption %></div>\\n    <% } %>\\n    <% if (allowEditing) { %>\\n    <div class=\\\"title-input form-inline\\\">\\n        <input type=\\\"text\\\" class=\\\"title-input form-control\\\" value=\\\"<%- title %>\\\" />\\n        <button type=\\\"button\\\" class=\\\"btn btn-save-title btn-success btn-sm\\\"><span class=\\\"glyphicon glyphicon-ok\\\"></span></button>\\n        <button type=\\\"button\\\" class=\\\"btn btn-cancel btn-link btn-sm\\\">Cancel</button>\\n    </div>\\n    <div class=\\\"title-buttons\\\">\\n        <a href=\\\"#\\\" class=\\\"btn-remove pull-right btn btn-sm btn-default\\\">\\n            <span class=\\\"glyphicon glyphicon-remove\\\"></span>\\n            Delete Group\\n        </a>\\n        <a href=\\\"#\\\" class=\\\"btn-edit pull-right btn btn-sm btn-success\\\">\\n            <span class=\\\"glyphicon glyphicon-pencil\\\"></span>\\n            Edit Title\\n        </a>\\n    </div>\\n    <% } %>\\n</li>\\n\"\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-template.html","import popoverHtml from './add-group-popover-template.html';\n\nvar AddGroupPopoverView = Backbone.View.extend({\n    el: '#add-group-wrapper',\n\n    events: {\n        'click #add-group':                     'preventSubmission',\n        'show.bs.popover #add-group':           'focusInput',\n        'keydown .popover-content input:first': 'addGroupOnEnter',\n        'click .popover-content .btn':          'addGroup',\n    },\n\n    groups: null,\n\n    initialize: function (attributes, options) {\n        this.$el.find('#add-group').popover(\n            {\n                html:      true,\n                placement: 'top',\n                content:   popoverHtml\n            }\n        );\n    },\n\n    setGroups: function (groups) {\n        this.groups = groups;\n\n        return this;\n    },\n\n    preventSubmission: function (e) {\n        e.preventDefault();\n    },\n\n    focusInput: function (e) {\n        setTimeout(\n            _.bind(\n                function () {\n                    this.$el.find('.popover-content input').focus();\n                },\n                this\n            ),\n            1\n        );\n    },\n\n    addGroupOnEnter: function (e) {\n        if (13 === e.keyCode) {\n            return this.addGroup(e);\n        }\n    },\n\n    addGroup: function (e) {\n        e.preventDefault();\n\n        $('#add-group').popover('hide');\n\n        this.collection.add({\n            title: this.$el.find('.popover-content input').val()\n        });\n    }\n});\n\nexport default AddGroupPopoverView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/add-group-popover-view.js","var Model = Backbone.Model.extend({\n    defaults: {\n        allowEditing: true,\n        animate:      true,\n        title:        '',\n        caption:      '',\n        sortIndex:    null,\n        fields:       []\n    }\n});\n\nvar GroupsCollection = Backbone.Collection.extend({\n    model: Model,\n\n    comparator: 'sortIndex',\n\n    toJSON: function () {\n        return this.map(\n            function (model) {\n                return _.pick(model.toJSON(this), ['title', 'fields'])\n            }\n        );\n    },\n\n    initializeWithGlobalVariable: function () {\n        if ('undefined' === typeof window.initialFieldGroupsConfig) {\n            throw 'Could not find initialFieldGroupsConfig variable in global scope';\n        }\n\n        _.each(\n            window.initialFieldGroupsConfig,\n            function (group, index) {\n                group.allowEditing = true;\n                group.animate      = false;\n                group.sortIndex    = index;\n\n                if (0 === index) {\n                    group.allowEditing = false;\n                }\n\n                this.add(group);\n            },\n            this\n        );\n    }\n});\n\nexport default GroupsCollection;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/groups-collection.js","import List from './list-view';\n\nvar GroupsView = Backbone.View.extend({\n    el: '#groups-wrapper',\n\n    events: {\n        'sortstop': 'updateSortIndexes'\n    },\n\n    initialize: function () {\n        this.collection.on('add remove', this.render, this);\n    },\n\n    render: function () {\n        var hideTitle = (1 === this.collection.length);\n\n        this.$el.empty();\n\n        this.collection.each(\n            function (group, index) {\n                var view = new List({\n                    model:          group,\n                    hideTitle:      hideTitle,\n                    ungroupedModel: this.collection.first()\n                });\n\n                this.$el.append(view.render().el);\n            },\n            this\n        );\n\n        this.$el.sortable({\n            items: 'ul:not(.list-group:first)',\n        }).disableSelection();\n\n        return this;\n    },\n\n    updateSortIndexes: function () {\n        this.$el.find('.list-group').each(\n            _.bind(\n                function (index, list) {\n                    this.collection.get($(list).data('model-id')).set('sortIndex', index);\n                    this.collection.sort();\n                },\n                this\n            )\n        );\n    }\n});\n\nexport default GroupsView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/groups-view.js","import listHtml from './list-template.html';\nimport fieldHtml from './list-field-template.html';\n\nvar listTemplate  = _.template(listHtml),\n    fieldTemplate = _.template(fieldHtml);\n\nvar ListView =Backbone.View.extend({\n    template: listTemplate,\n\n    tagName: 'ul',\n\n    className: 'list-group',\n\n    hideTitle: false,\n\n    events: {\n        'sortstop':              'updateModelFields',\n        'sortremove':            'updateModelFields',\n        'sortreceive':           'updateModelFields',\n        'click .btn-remove':     'delete',\n        'click .btn-edit':       'showTitleInput',\n        'click .btn-save-title': 'saveTitle',\n        'click .btn-cancel':     'cancelTitleInput',\n        'keydown .title-input':  'saveTitleOnEnter'\n    },\n\n    initialize: function (attributes, options) {\n        this.model.on('change:title', this.render, this);\n        this.model.on('change:fields', this.updateBadge, this);\n\n        this.hideTitle      = attributes.hideTitle;\n        this.ungroupedModel = attributes.ungroupedModel;\n    },\n\n    render: function () {\n        var list;\n\n        this.$el.html(this.template(this.model.toJSON()));\n        this.$el.find('.title-input').hide();\n\n        if (this.model.get('animate') && !this.model.get('fields').length) {\n            this.$el.velocity('transition.flipYIn');\n        }\n\n        // We don't want to show the title at all when there is only 1 group\n        if (this.hideTitle) {\n            this.$el.find('.list-group-item-title').remove();\n        }\n\n        this.$el.data('model-id', this.model.cid);\n\n        this.$el.sortable({\n            items:       'li:not(.list-group-item-title)',\n            connectWith: '.list-group'\n        }).disableSelection();\n\n        _.each(\n            this.model.get('fields'),\n            function (field, index) {\n                this.$el.append(fieldTemplate(field));\n            },\n            this\n        );\n\n        return this;\n    },\n\n    delete: function (e) {\n        e.preventDefault();\n\n        // Pass remaining fields over to the \"ungrouped\" set\n        this.ungroupedModel.set(\n            'fields',\n            this.ungroupedModel.get('fields').concat(this.model.get('fields'))\n        );\n\n        this.model.destroy();\n    },\n\n    showTitleInput: function (e) {\n        e.preventDefault();\n\n        this.$el.find('h4').hide();\n        this.$el.find('.title-input').show();\n        this.$el.find('.title-input').focus();\n    },\n\n    saveTitleOnEnter: function (e) {\n        if (13 === e.keyCode) {\n            this.saveTitle(e);\n        }\n    },\n\n    saveTitle: function (e) {\n        e.preventDefault();\n\n        this.model.set('title', this.$el.find('.title-input input').val());\n\n        this.cancelTitleInput(e);\n    },\n\n    cancelTitleInput: function (e) {\n        e.preventDefault();\n\n        this.$el.find('.title-input').hide();\n        this.$el.find('h4').show();\n    },\n\n    updateBadge: function () {\n        var count  = this.model.get('fields').length,\n            suffix = (1 === count ? '' : 's');\n\n        this.$el.find('.badge').text(count + ' Field' + suffix);\n    },\n\n    updateModelFields: function (e, ui) {\n        var fields = [];\n\n        this.$el.find('li:not(.list-group-item-title)').each(\n            function (index, element) {\n                fields.push({\n                    id:        $(element).data('field-id'),\n                    label:     $(element).find('.field-label').text()\n                });\n            }\n        );\n\n        this.model.set('fields', fields);\n    }\n});\n\nexport default ListView;\n\n\n\n// WEBPACK FOOTER //\n// ./www/src/js/sort-fields/list-view.js"],"sourceRoot":""}