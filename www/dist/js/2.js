webpackJsonp([2],{

/***/ 143:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__input_file_upload_view__ = __webpack_require__(180);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar InputFile = function InputFile() {\n    var selector = arguments.length <= 0 || arguments[0] === undefined ? '.btn-input-file' : arguments[0];\n\n    _classCallCheck(this, InputFile);\n\n    // Render initial input state\n    $(selector).each(function (index, button) {\n        var input,\n            view = new __WEBPACK_IMPORTED_MODULE_0__input_file_upload_view__[\"a\" /* default */]();\n\n        button = $(button);\n        input = $(button.data('value-input'));\n\n        if (input.val()) {\n            var url = input.val();\n            if (button.data('file-url')) {\n                url = button.data('file-url');\n            }\n\n            view.setValueInput(input).setFileThumbnail(button.data('file-thumbnail')).setFileUrl(button.data('file-url')).renderFileValue(url, button.data('file-thumbnail'));\n        }\n    });\n\n    // Handle attempt to upload a file\n    $(document).on('click', selector, function (e) {\n        var view = new __WEBPACK_IMPORTED_MODULE_0__input_file_upload_view__[\"a\" /* default */](),\n            button = $(this);\n\n        e.preventDefault();\n\n        view.setValueInput($(button.data('value-input'))).setFileInputName(button.data('file-input-name')).setActionUrl(button.data('action-url'));\n\n        document.body.appendChild(view.render().el);\n    });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (InputFile);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(1)))\n\n//////////////////\n// WEBPACK FOOTER\n// ./www/src/js/input-file.js\n// module id = 143\n// module chunks = 2\n\n//# sourceURL=webpack:///./www/src/js/input-file.js?");

/***/ }),

/***/ 162:
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"input-file-status-ui\\\">\\n    <div class=\\\"alert alert-danger\\\" role=\\\"alert\\\">\\n        <% _.each(messages, function (message) { %>\\n        <div><%- message %></div>\\n        <% }); %>\\n    </div>\\n</div>\\n\";\n\n//////////////////\n// WEBPACK FOOTER\n// ./www/src/js/input-file/error-messages-template.html\n// module id = 162\n// module chunks = 2\n\n//# sourceURL=webpack:///./www/src/js/input-file/error-messages-template.html?");

/***/ }),

/***/ 163:
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"input-file-status-ui\\\">\\n    <div class=\\\"progress\\\">\\n        <div class=\\\"progress-bar progress-bar-striped active\\\" role=\\\"progressbar\\\" aria-valuenow=\\\"45\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\" style=\\\"width: 100%\\\">\\n            <span class=\\\"sr-only\\\">Loading...</span>\\n        </div>\\n    </div>\\n    <div class=\\\"progress-text text-muted\\\">Loading.  Please wait...</div>\\n</div>\\n\";\n\n//////////////////\n// WEBPACK FOOTER\n// ./www/src/js/input-file/progress-template.html\n// module id = 163\n// module chunks = 2\n\n//# sourceURL=webpack:///./www/src/js/input-file/progress-template.html?");

/***/ }),

/***/ 164:
/***/ (function(module, exports) {

eval("module.exports = \"<form class=\\\"input-file-upload-form\\\" enctype=\\\"multipart/form-data\\\" action=\\\"\\\" method=\\\"POST\\\">\\n    <input class=\\\"input-file-uploader\\\" type=\\\"file\\\" name=\\\"<%- fileInputName %>\\\" />\\n</form>\\n\";\n\n//////////////////\n// WEBPACK FOOTER\n// ./www/src/js/input-file/upload-template.html\n// module id = 164\n// module chunks = 2\n\n//# sourceURL=webpack:///./www/src/js/input-file/upload-template.html?");

/***/ }),

/***/ 165:
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"input-file-status-ui\\\">\\n    <% if (thumbnail) { %>\\n    <div class=\\\"panel panel-default\\\">\\n        <div class=\\\"panel-body\\\">\\n            <a target=\\\"_blank\\\" href=\\\"<%- url %>\\\">\\n                <div class=\\\"thumbnail\\\">\\n                    <img src=\\\"<%- thumbnail %>\\\" />\\n                </div>\\n\\n                <span class=\\\"glyphicon glyphicon-file\\\"></span>\\n                <%- url.split('/').pop() %>\\n            </a>\\n        </div>\\n    </div>\\n    <% } else { %>\\n    <a target=\\\"_blank\\\" href=\\\"<%- url %>\\\">\\n        <span class=\\\"glyphicon glyphicon-file\\\"></span>\\n        <%- url.split('/').pop() %>\\n    </a>\\n    <% } %>\\n\\n\\n    <div class=\\\"btn-group btn-group-justified\\\" role=\\\"group\\\">\\n        <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs btn-remove\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span> Remove</button>\\n        </div>\\n        <!--\\n        <div class=\\\"btn-group\\\" role=\\\"group\\\">\\n            <button type=\\\"button\\\" class=\\\"btn btn-default btn-xs btn-copy\\\"><span class=\\\"glyphicon glyphicon-copy\\\"></span> Copy</button>\\n        </div>\\n        -->\\n    </div>\\n</div>\\n\";\n\n//////////////////\n// WEBPACK FOOTER\n// ./www/src/js/input-file/value-template.html\n// module id = 165\n// module chunks = 2\n\n//# sourceURL=webpack:///./www/src/js/input-file/value-template.html?");

/***/ }),

/***/ 180:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__upload_template_html__ = __webpack_require__(164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__upload_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__upload_template_html__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__value_template_html__ = __webpack_require__(165);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__value_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__value_template_html__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__progress_template_html__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__progress_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__progress_template_html__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__error_messages_template_html__ = __webpack_require__(162);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__error_messages_template_html___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__error_messages_template_html__);\n\n\n\n\n\nvar uploadTemplate = _.template(__WEBPACK_IMPORTED_MODULE_0__upload_template_html___default.a),\n    valueTemplate = _.template(__WEBPACK_IMPORTED_MODULE_1__value_template_html___default.a),\n    progressTemplate = _.template(__WEBPACK_IMPORTED_MODULE_2__progress_template_html___default.a),\n    errorMessagesTemplate = _.template(__WEBPACK_IMPORTED_MODULE_3__error_messages_template_html___default.a);\n\nvar UploadView = Backbone.View.extend({\n    events: {\n        'change input': 'handleFileSelected'\n    },\n\n    setValueInput: function setValueInput($valueInput) {\n        this.$valueInput = $valueInput;\n        this.$wrapper = $valueInput.parent();\n\n        return this;\n    },\n\n    setFileInputName: function setFileInputName(fileInputName) {\n        this.fileInputName = fileInputName;\n\n        return this;\n    },\n\n    setFileThumbnail: function setFileThumbnail(fileThumbnail) {\n        this.fileThumbnail = fileThumbnail;\n        return this;\n    },\n\n    setFileUrl: function setFileUrl(fileUrl) {\n        this.fileUrl = fileUrl;\n        return this;\n    },\n\n    setActionUrl: function setActionUrl(actionUrl) {\n        this.actionUrl = actionUrl;\n\n        return this;\n    },\n\n    render: function render() {\n        this.$el.html(uploadTemplate({\n            fileInputName: this.fileInputName\n        }));\n\n        this.$el.find('input').click();\n\n        if (this.$valueInput.val()) {\n            var url = this.$valueInput.val();\n            if (this.fileUrl) {\n                url = this.fileUrl;\n            }\n\n            this.renderFileValue(url, this.fileThumbnail);\n        }\n\n        return this;\n    },\n\n    renderFileValue: function renderFileValue(url, thumbnail) {\n        this.clearStatusUi();\n\n        // @todo Refactor value UI into a sub-view so we can use Backbone event delegation for the buttons\n        this.$wrapper.find('.value-wrapper').append(valueTemplate({\n            url: url,\n            thumbnail: thumbnail\n        }));\n\n        this.$wrapper.on('click', '.btn-remove', _.bind(function (e) {\n            e.preventDefault();\n            this.$valueInput.val('');\n            this.clearStatusUi();\n        }, this));\n\n        this.$wrapper.on('click', '.btn-copy', _.bind(function (e) {\n            e.preventDefault();\n            this.$valueInput.val('');\n        }, this));\n    },\n\n    renderErrorMessages: function renderErrorMessages(messages) {\n        this.clearStatusUi();\n\n        this.$wrapper.append(errorMessagesTemplate({\n            messages: messages\n        }));\n    },\n\n    renderProgressBar: function renderProgressBar() {\n        this.clearStatusUi();\n\n        this.$wrapper.find('.value-wrapper').append(progressTemplate({}));\n    },\n\n    clearStatusUi: function clearStatusUi() {\n        this.$wrapper.find('.input-file-status-ui').remove();\n    },\n\n    handleFileSelected: function handleFileSelected(e) {\n        var files = e.target.files,\n            data = new FormData();\n\n        _.each(files, function (file) {\n            data.append(this.$el.find('input').attr('name'), file);\n        }, this);\n\n        this.renderProgressBar();\n\n        $.ajax({\n            url: this.actionUrl,\n            type: 'POST',\n            data: data,\n            cache: false,\n            dataType: 'json',\n            processData: false,\n            contentType: false,\n            success: _.bind(function (response) {\n                if (!response || 'success' !== response.result) {\n                    this.renderErrorMessages(response.messages);\n                } else {\n                    this.$valueInput.val(response.value).trigger('change');\n\n                    this.renderFileValue(response.url, response.thumbnail);\n                }\n            }, this),\n            error: _.bind(function () {\n                this.renderErrorMessages(['There was an error uploading the selected file.  Please try again.']);\n            }, this)\n        });\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (UploadView);\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(1)))\n\n//////////////////\n// WEBPACK FOOTER\n// ./www/src/js/input-file/upload-view.js\n// module id = 180\n// module chunks = 2\n\n//# sourceURL=webpack:///./www/src/js/input-file/upload-view.js?");

/***/ })

});