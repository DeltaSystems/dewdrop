webpackJsonp([1],{135:function(t,e,i){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=i(169),l=i(170),o=i(168),s=function SortFields(){_classCallCheck(this,SortFields);var t=new n.a;new o.a({collection:t}),new l.a({collection:t});t.initializeWithGlobalVariable(),$("#sort-form").on("submit",function(e){$("#sorted-fields").val(JSON.stringify(t.toJSON()))})};e.default=s},153:function(t,e){t.exports='<div class="form-inline">\n    <input placeholder="Enter group title..." type="text" class="form-control" />\n    <button class="btn btn-success btn-add-group"><span class="glyphicon glyphicon-ok"></span></button>\n</div>\n'},154:function(t,e){t.exports='<li data-field-id="<%- id %>" class="list-group-item">\n    <span class="field-label"><%- label %></span>\n    <span class="text-muted glyphicon glyphicon-align-justify pull-right"></span>\n</li>\n'},155:function(t,e){t.exports='<li class="list-group-item list-group-item-title">\n    <span class="badge">\n        <%- fields.length %>\n        <%- (1 === fields.length ? \'Field\' : \'Fields\') %>\n    </span>\n    <h4>\n        <%- title %>\n    </h4>\n    <% if (caption) { %>\n    <div class="help-block"><%- caption %></div>\n    <% } %>\n    <% if (allowEditing) { %>\n    <div class="title-input form-inline">\n        <input type="text" class="title-input form-control" value="<%- title %>" />\n        <button type="button" class="btn btn-save-title btn-success btn-sm"><span class="glyphicon glyphicon-ok"></span></button>\n        <button type="button" class="btn btn-cancel btn-link btn-sm">Cancel</button>\n    </div>\n    <div class="title-buttons">\n        <a href="#" class="btn-remove pull-right btn btn-sm btn-default">\n            <span class="glyphicon glyphicon-remove"></span>\n            Delete Group\n        </a>\n        <a href="#" class="btn-edit pull-right btn btn-sm btn-success">\n            <span class="glyphicon glyphicon-pencil"></span>\n            Edit Title\n        </a>\n    </div>\n    <% } %>\n</li>\n'},168:function(t,e,i){"use strict";var n=i(153),l=i.n(n),o=i(117),s=i.n(o),a=Backbone.View.extend({el:"#add-group-wrapper",events:{"click #add-group":"preventSubmission","show.bs.popover #add-group":"focusInput","keydown .popover-content input:first":"addGroupOnEnter","click .popover-content .btn":"addGroup"},groups:null,initialize:function(t,e){this.$el.find("#add-group").popover({html:!0,placement:"top",content:l.a})},setGroups:function(t){return this.groups=t,this},preventSubmission:function(t){t.preventDefault()},focusInput:function(t){setTimeout(s.a.bind(function(){this.$el.find(".popover-content input").focus()},this),1)},addGroupOnEnter:function(t){if(13===t.keyCode)return this.addGroup(t)},addGroup:function(t){t.preventDefault(),$("#add-group").popover("hide"),this.collection.add({title:this.$el.find(".popover-content input").val()})}});e.a=a},169:function(t,e,i){"use strict";var n=i(117),l=i.n(n),o=Backbone.Model.extend({defaults:{allowEditing:!0,animate:!0,title:"",caption:"",sortIndex:null,fields:[]}}),s=Backbone.Collection.extend({model:o,comparator:"sortIndex",toJSON:function(){return this.map(function(t){return l.a.pick(t.toJSON(this),["title","fields"])})},initializeWithGlobalVariable:function(){if(void 0===window.initialFieldGroupsConfig)throw"Could not find initialFieldGroupsConfig variable in global scope";l.a.each(window.initialFieldGroupsConfig,function(t,e){t.allowEditing=!0,t.animate=!1,t.sortIndex=e,0===e&&(t.allowEditing=!1),this.add(t)},this)}});e.a=s},170:function(t,e,i){"use strict";var n=i(171),l=i(117),o=i.n(l),s=Backbone.View.extend({el:"#groups-wrapper",events:{sortstop:"updateSortIndexes"},initialize:function(){this.collection.on("add remove",this.render,this)},render:function(){var t=1===this.collection.length;return this.$el.empty(),this.collection.each(function(e,i){var l=new n.a({model:e,hideTitle:t,ungroupedModel:this.collection.first()});this.$el.append(l.render().el)},this),this.$el.sortable({items:"ul:not(.list-group:first)"}).disableSelection(),this},updateSortIndexes:function(){this.$el.find(".list-group").each(o.a.bind(function(t,e){this.collection.get($(e).data("model-id")).set("sortIndex",t),this.collection.sort()},this))}});e.a=s},171:function(t,e,i){"use strict";var n=i(155),l=i.n(n),o=i(154),s=i.n(o),a=i(117),d=i.n(a),c=d.a.template(l.a),u=d.a.template(s.a),r=Backbone.View.extend({template:c,tagName:"ul",className:"list-group",hideTitle:!1,events:{sortstop:"updateModelFields",sortremove:"updateModelFields",sortreceive:"updateModelFields","click .btn-remove":"delete","click .btn-edit":"showTitleInput","click .btn-save-title":"saveTitle","click .btn-cancel":"cancelTitleInput","keydown .title-input":"saveTitleOnEnter"},initialize:function(t,e){this.model.on("change:title",this.render,this),this.model.on("change:fields",this.updateBadge,this),this.hideTitle=t.hideTitle,this.ungroupedModel=t.ungroupedModel},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.$el.find(".title-input").hide(),this.model.get("animate")&&!this.model.get("fields").length&&this.$el.velocity("transition.flipYIn"),this.hideTitle&&this.$el.find(".list-group-item-title").remove(),this.$el.data("model-id",this.model.cid),this.$el.sortable({items:"li:not(.list-group-item-title)",connectWith:".list-group"}).disableSelection(),d.a.each(this.model.get("fields"),function(t,e){this.$el.append(u(t))},this),this},delete:function(t){t.preventDefault(),this.ungroupedModel.set("fields",this.ungroupedModel.get("fields").concat(this.model.get("fields"))),this.model.destroy()},showTitleInput:function(t){t.preventDefault(),this.$el.find("h4").hide(),this.$el.find(".title-input").show(),this.$el.find(".title-input").focus()},saveTitleOnEnter:function(t){13===t.keyCode&&this.saveTitle(t)},saveTitle:function(t){t.preventDefault(),this.model.set("title",this.$el.find(".title-input input").val()),this.cancelTitleInput(t)},cancelTitleInput:function(t){t.preventDefault(),this.$el.find(".title-input").hide(),this.$el.find("h4").show()},updateBadge:function(){var t=this.model.get("fields").length,e=1===t?"":"s";this.$el.find(".badge").text(t+" Field"+e)},updateModelFields:function(t,e){var i=[];this.$el.find("li:not(.list-group-item-title)").each(function(t,e){i.push({id:$(e).data("field-id"),label:$(e).find(".field-label").text()})}),this.model.set("fields",i)}});e.a=r}});
//# sourceMappingURL=1.js.map