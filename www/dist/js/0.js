webpackJsonp([0],{128:function(t,e,n){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(156),s=n(158),r=n(159),o=function Filter(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".filter-form";_classCallCheck(this,Filter),t.length||(t=".filter-form"),$(t).each(function(t,e){var n,o,a=$(e).data("prefix"),l=new i.a;l.loadConfigFromGlobalVariable(a),n=new s.a,n.loadValuesFromGlobalVariable(a),n.length||n.add({}),o=new r.a({fields:l,collection:n}),$(e).find("fieldset").first().append(o.render().el)})};e.default=o},139:function(t,e,n){"use strict";var i=n(140),s=n.n(i),r=n(117),o=n.n(r),a=s.a.View.extend({tagName:"span",className:"form-inline",inputIndex:null,options:null,events:{"change select":"focusInput","blur input":"updateValues","change input":"updateValues"},initialize:function(t,e){this.inputIndex=t.inputIndex,void 0!==t.options&&(this.options=t.options)},render:function(){return this.$el.html(this.template({inputIndex:this.inputIndex,values:this.model.get("values"),options:this.options})),this.model.get("isNew")&&this.focusOnNextTick(),this.model.set("isNew",!1),this.postRender(),this},postRender:function(){},focusInput:function(){var t=this.$el.find("input");t.length&&t.first().focus(),this.updateValues()},focusOnNextTick:function(){setTimeout(o.a.bind(this.focusInput,this),1)}});e.a=a},140:function(t,e,n){(function(i){var s,r;!function(o){var a="object"==typeof self&&self.self===self&&self||"object"==typeof i&&i.global===i&&i;s=[n(117),n(177),e],void 0!==(r=function(t,e,n){a.Backbone=o(a,n,t,e)}.apply(e,s))&&(t.exports=r)}(function(t,e,n,i){var s=t.Backbone,r=Array.prototype.slice;e.VERSION="1.3.3",e.$=i,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=function(t,e,i){switch(t){case 1:return function(){return n[e](this[i])};case 2:return function(t){return n[e](this[i],t)};case 3:return function(t,s){return n[e](this[i],l(t,this),s)};case 4:return function(t,s,r){return n[e](this[i],l(t,this),s,r)};default:return function(){var t=r.call(arguments);return t.unshift(this[i]),n[e].apply(n,t)}}},a=function(t,e,i){n.each(e,function(e,s){n[s]&&(t.prototype[s]=o(e,s,i))})},l=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?u(t):n.isString(t)?function(e){return e.get(t)}:t},u=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},h=e.Events={},c=/\s+/,d=function(t,e,i,s,r){var o,a=0;if(i&&"object"==typeof i){void 0!==s&&"context"in r&&void 0===r.context&&(r.context=s);for(o=n.keys(i);a<o.length;a++)e=d(t,e,o[a],i[o[a]],r)}else if(i&&c.test(i))for(o=i.split(c);a<o.length;a++)e=t(e,o[a],s,r);else e=t(e,i,s,r);return e};h.on=function(t,e,n){return f(this,t,e,n)};var f=function(t,e,n,i,s){if(t._events=d(p,t._events||{},e,n,{context:i,ctx:t,listening:s}),s){(t._listeners||(t._listeners={}))[s.id]=s}return t};h.listenTo=function(t,e,i){if(!t)return this;var s=t._listenId||(t._listenId=n.uniqueId("l")),r=this._listeningTo||(this._listeningTo={}),o=r[s];if(!o){var a=this._listenId||(this._listenId=n.uniqueId("l"));o=r[s]={obj:t,objId:s,id:a,listeningTo:r,count:0}}return f(t,e,i,this,o),this};var p=function(t,e,n,i){if(n){var s=t[e]||(t[e]=[]),r=i.context,o=i.ctx,a=i.listening;a&&a.count++,s.push({callback:n,context:r,ctx:r||o,listening:a})}return t};h.off=function(t,e,n){return this._events?(this._events=d(v,this._events,t,e,{context:n,listeners:this._listeners}),this):this},h.stopListening=function(t,e,i){var s=this._listeningTo;if(!s)return this;for(var r=t?[t._listenId]:n.keys(s),o=0;o<r.length;o++){var a=s[r[o]];if(!a)break;a.obj.off(e,i,this)}return this};var v=function(t,e,i,s){if(t){var r,o=0,a=s.context,l=s.listeners;if(e||i||a){for(var u=e?[e]:n.keys(t);o<u.length;o++){e=u[o];var h=t[e];if(!h)break;for(var c=[],d=0;d<h.length;d++){var f=h[d];i&&i!==f.callback&&i!==f.callback._callback||a&&a!==f.context?c.push(f):(r=f.listening)&&0==--r.count&&(delete l[r.id],delete r.listeningTo[r.objId])}c.length?t[e]=c:delete t[e]}return t}for(var p=n.keys(l);o<p.length;o++)r=l[p[o]],delete l[r.id],delete r.listeningTo[r.objId]}};h.once=function(t,e,i){var s=d(m,{},t,e,n.bind(this.off,this));return"string"==typeof t&&null==i&&(e=void 0),this.on(s,e,i)},h.listenToOnce=function(t,e,i){var s=d(m,{},e,i,n.bind(this.stopListening,this,t));return this.listenTo(t,s)};var m=function(t,e,i,s){if(i){var r=t[e]=n.once(function(){s(e,r),i.apply(this,arguments)});r._callback=i}return t};h.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),i=0;i<e;i++)n[i]=arguments[i+1];return d(g,this._events,t,void 0,n),this};var g=function(t,e,n,i){if(t){var s=t[e],r=t.all;s&&r&&(r=r.slice()),s&&y(s,i),r&&y(r,[e].concat(i))}return t},y=function(t,e){var n,i=-1,s=t.length,r=e[0],o=e[1],a=e[2];switch(e.length){case 0:for(;++i<s;)(n=t[i]).callback.call(n.ctx);return;case 1:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r);return;case 2:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o);return;case 3:for(;++i<s;)(n=t[i]).callback.call(n.ctx,r,o,a);return;default:for(;++i<s;)(n=t[i]).callback.apply(n.ctx,e);return}};h.bind=h.on,h.unbind=h.off,n.extend(e,h);var b=e.Model=function(t,e){var i=t||{};e||(e={}),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(i=this.parse(i,e)||{});var s=n.result(this,"defaults");i=n.defaults(n.extend({},s,i),s),this.set(i,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(b.prototype,h,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,i){if(null==t)return this;var s;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;var r=i.unset,o=i.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,h=this.changed,c=this._previousAttributes;for(var d in s)e=s[d],n.isEqual(u[d],e)||a.push(d),n.isEqual(c[d],e)?delete h[d]:h[d]=e,r?delete u[d]:u[d]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!o){a.length&&(this._pending=i);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,u[a[f]],i)}if(l)return this;if(!o)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,i={};for(var s in t){var r=t[s];n.isEqual(e[s],r)||(i[s]=r)}return!!n.size(i)&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,i=t.success;return t.success=function(n){var s=t.parse?e.parse(n,t):n;if(!e.set(s,t))return!1;i&&i.call(t.context,e,n,t),e.trigger("sync",e,n,t)},M(this,t),this.sync("read",this,t)},save:function(t,e,i){var s;null==t||"object"==typeof t?(s=t,i=e):(s={})[t]=e,i=n.extend({validate:!0,parse:!0},i);var r=i.wait;if(s&&!r){if(!this.set(s,i))return!1}else if(!this._validate(s,i))return!1;var o=this,a=i.success,l=this.attributes;i.success=function(t){o.attributes=l;var e=i.parse?o.parse(t,i):t;if(r&&(e=n.extend({},s,e)),e&&!o.set(e,i))return!1;a&&a.call(i.context,o,t,i),o.trigger("sync",o,t,i)},M(this,i),s&&r&&(this.attributes=n.extend({},l,s));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=s);var h=this.sync(u,this,i);return this.attributes=l,h},destroy:function(t){t=t?n.clone(t):{};var e=this,i=t.success,s=t.wait,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(n){s&&r(),i&&i.call(t.context,e,n,t),e.isNew()||e.trigger("sync",e,n,t)};var o=!1;return this.isNew()?n.defer(t.success):(M(this,t),o=this.sync("delete",this,t)),s||r(),o},url:function(){var t=n.result(this,"urlRoot")||n.result(this.collection,"url")||j();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return!i||(this.trigger("invalid",this,i,n.extend(e,{validationError:i})),!1)}}),a(b,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var x=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},_={add:!0,remove:!0,merge:!0},w={add:!0,remove:!1},I=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var i,s=Array(t.length-n),r=e.length;for(i=0;i<s.length;i++)s[i]=t[i+n];for(i=0;i<r;i++)t[i+n]=e[i];for(i=0;i<s.length;i++)t[i+r+n]=s[i]};n.extend(x.prototype,h,{model:b,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,w))},remove:function(t,e){e=n.extend({},e);var i=!n.isArray(t);t=i?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),i?s[0]:s},set:function(t,e){if(null!=t){e=n.extend({},_,e),e.parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var i=!n.isArray(t);t=i?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var r,o,a=[],l=[],u=[],h=[],c={},d=e.add,f=e.merge,p=e.remove,v=!1,m=this.comparator&&null==s&&!1!==e.sort,g=n.isString(this.comparator)?this.comparator:null;for(o=0;o<t.length;o++){r=t[o];var y=this.get(r);if(y){if(f&&r!==y){var b=this._isModel(r)?r.attributes:r;e.parse&&(b=y.parse(b,e)),y.set(b,e),u.push(y),m&&!v&&(v=y.hasChanged(g))}c[y.cid]||(c[y.cid]=!0,a.push(y)),t[o]=y}else d&&(r=t[o]=this._prepareModel(r,e))&&(l.push(r),this._addReference(r,e),c[r.cid]=!0,a.push(r))}if(p){for(o=0;o<this.length;o++)r=this.models[o],c[r.cid]||h.push(r);h.length&&this._removeModels(h,e)}var x=!1,w=!m&&d&&p;if(a.length&&w?(x=this.length!==a.length||n.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,I(this.models,a,0),this.length=this.models.length):l.length&&(m&&(v=!0),I(this.models,l,null==s?this.length:s),this.length=this.models.length),v&&this.sort({silent:!0}),!e.silent){for(o=0;o<l.length;o++)null!=s&&(e.index=s+o),r=l[o],r.trigger("add",r,this,e);(v||x)&&this.trigger("sort",this,e),(l.length||h.length||u.length)&&(e.changes={added:l,removed:h,merged:u},this.trigger("update",this,e))}return i?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var i=e.length;return n.isFunction(e)&&(e=n.bind(e,this)),1===i||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){t=n.extend({parse:!0},t);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e.call(t.context,i,n,t),i.trigger("sync",i,n,t)},M(this,t),this.sync("read",this,t)},create:function(t,e){e=e?n.clone(e):{};var i=e.wait;if(!(t=this._prepareModel(t,e)))return!1;i||this.add(t,e);var s=this,r=e.success;return e.success=function(t,e,n){i&&s.add(t,n),r&&r.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?n.clone(e):{},e.collection=this;var i=new this.model(t,e);return i.validationError?(this.trigger("invalid",this,i.validationError,e),!1):i},_removeModels:function(t,e){for(var n=[],i=0;i<t.length;i++){var s=this.get(t[i]);if(s){var r=this.indexOf(s);this.models.splice(r,1),this.length--,delete this._byId[s.cid];var o=this.modelId(s.attributes);null!=o&&delete this._byId[o],e.silent||(e.index=r,s.trigger("remove",s,this,e)),n.push(s),this._removeReference(s,e)}}return n},_isModel:function(t){return t instanceof b},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,i){if(e){if(("add"===t||"remove"===t)&&n!==this)return;if("destroy"===t&&this.remove(e,i),"change"===t){var s=this.modelId(e.previousAttributes()),r=this.modelId(e.attributes);s!==r&&(null!=s&&delete this._byId[s],null!=r&&(this._byId[r]=e))}}this.trigger.apply(this,arguments)}}),a(x,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var $=e.View=function(t){this.cid=n.uniqueId("view"),n.extend(this,n.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];n.extend($.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,"events")),!t)return this;this.undelegateEvents();for(var e in t){var i=t[e];if(n.isFunction(i)||(i=this[i]),i){var s=e.match(k);this.delegate(s[1],s[2],n.bind(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var t=n.extend({},n.result(this,"attributes"));this.id&&(t.id=n.result(this,"id")),this.className&&(t.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,i,s){var r=O[t];n.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var o={type:r,dataType:"json"};if(s.url||(o.url=n.result(i,"url")||j()),null!=s.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(o.contentType="application/json",o.data=JSON.stringify(s.attrs||i.toJSON(s))),s.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){o.type="POST",s.emulateJSON&&(o.data._method=r);var a=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===o.type||s.emulateJSON||(o.processData=!1);var l=s.error;s.error=function(t,e,n){s.textStatus=e,s.errorThrown=n,l&&l.call(s.context,t,e,n)};var u=s.xhr=e.ajax(n.extend(o,s));return i.trigger("request",i,u,s),u};var O={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,N=/(\(\?)?:\w+/g,C=/\*\w+/g,P=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(S.prototype,h,{initialize:function(){},route:function(t,i,s){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(i)&&(s=i,i=""),s||(s=this[i]);var r=this;return e.history.route(t,function(n){var o=r._extractParameters(t,n);!1!==r.execute(s,o,i)&&(r.trigger.apply(r,["route:"+i].concat(o)),r.trigger("route",i,o),e.history.trigger("route",r,i,o))}),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(P,"\\$&").replace(T,"(?:$1)?").replace(N,function(t,e){return e?t:"([^/?]+)"}).replace(C,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return n.map(i,function(t,e){return e===i.length-1?t||null:t?decodeURIComponent(t):null})}});var R=e.History=function(){this.handlers=[],this.checkUrl=n.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},H=/^[#\/]|\s+$/g,V=/^\/+|\/+$/g,A=/#.*$/;R.started=!1,n.extend(R.prototype,h,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(H,"")},start:function(t){if(R.started)throw new Error("Backbone.history has already been started");if(R.started=!0,this.options=n.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(V,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,s=i.insertBefore(this.iframe,i.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?r("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?r("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),R.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!R.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var n=this.root;""!==t&&"?"!==t.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+t;if(t=this.decodeFragment(t.replace(A,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var i=t.href.replace(/(javascript:|#).*$/,"");t.replace(i+"#"+e)}else t.hash="#"+e}}),e.history=new R;var F=function(t,e){var i,s=this;return i=t&&n.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},n.extend(i,s,e),i.prototype=n.create(s.prototype,t),i.prototype.constructor=i,i.__super__=s.prototype,i};b.extend=x.extend=S.extend=$.extend=R.extend=F;var j=function(){throw new Error('A "url" property or function must be specified')},M=function(t,e){var n=e.error;e.error=function(i){n&&n.call(e.context,t,i,e),t.trigger("error",t,i,e)}};return e})}).call(e,n(176))},142:function(t,e){t.exports='<div class="row">\n    <div class="col-sm-4">\n        <select class="form-control input-sm filter-field" name="ftr-id.<%- index %>">\n            <option value="" disabled="disabled" selected="selected">Select a field to filter by...</option>\n            <% _.each(fields, function (field) { %>\n\n            <% if (selected === field.id) { %>\n            <option selected="selected" value="<%- field.id.replace(\'+\', \' \') %>"><%- field.label %></option>\n            <% } else { %>\n            <option value="<%- field.id %>"><%- field.label %></option>\n            <% } %>\n\n            <% }); %>\n        </select>\n    </div>\n    <div class="col-sm-8">\n        <div class="form-inline">\n            <span class="glyphicon glyphicon-arrow-right visible-xs"></span>\n            <span class="form-inline filter-control-wrapper"></span>\n            <div class="pull-right btn-group">\n                <button type="button" class="js-add btn btn-add btn-default btn-sm"><span class="glyphicon glyphicon-plus"></span></button>\n                <button type="button" class="js-remove btn btn-remove btn-default btn-sm"><span class="glyphicon glyphicon-minus"></span></button>\n            </div>\n        </div>\n    </div>\n</div>\n'},143:function(t,e){t.exports='<span class="text-muted"> is </span>\n\n&nbsp;\n\n<select name="ftr-value.<%- inputIndex %>" class="form-control input-sm">\n    <% if (\'undefined\' === typeof values.value || null === values.value || \'\' === values.value) { %>\n    <option value="" selected="selected">Yes or No</option>\n    <option value="0">No</option>\n    <option value="1">Yes</option>\n    <% } else if (1 === parseInt(values.value, 10)) { %>\n    <option value="">Yes or No</option>\n    <option value="0">No</option>\n    <option value="1" selected="selected">Yes</option>\n    <% } else { %>\n    <option value="">Yes or No</option>\n    <option value="0" selected="selected">No</option>\n    <option value="1">Yes</option>\n    <% } %>\n</select>\n'},144:function(t,e){t.exports='<%\nvar options = {\n    \'on-or-between\': \'is on or between\',\n    \'between\':       \'is between\',\n    \'on-or-before\':  \'is on or before\',\n    \'before\':        \'is before\',\n    \'on-or-after\':   \'is on or after\',\n    \'after\':         \'is after\',\n    \'is\':            \'is\'\n};\n%>\n\n<select name="ftr-comp.<%- inputIndex %>" class="form-control input-sm">\n    <% _.each(options, function (option, key) { %>\n\n    <% if (\'today\' === key) { %>\n    <option value="" disabled="disabled">&mdash;</option>\n    <% } %>\n\n    <% if (values.comp === key) { %>\n    <option value="<%- key %>" selected="selected"><%- option %></options>\n    <% } else { %>\n    <option value="<%- key %>"><%- option %></options>\n    <% } %>\n\n    <% }); %>\n</select>\n\n<span class="filter-date-inputs">\n    <input name="ftr-start.<%- inputIndex %>" type="date" class="filter-start form-control input-sm" value="<%- values.start %>" />\n\n    <span class="filter-date-end-wrapper">\n        <span class="text-muted">&nbsp; and &nbsp;</span>\n        <input name="ftr-end.<%- inputIndex %>" type="date" class="filter-end form-control input-sm" value="<%- values.end %>" />\n    </span>\n</span>\n'},145:function(t,e){t.exports='<%\nvar operators = {\n    "contains":     "contains",\n    "not-contains": "does not contain",\n    "is-empty":     "is empty",\n    "is-not-empty": "is not empty"\n};\n%>\n\n<select name="ftr-comp.<%- inputIndex %>" class="filter-op form-control input-sm">\n    <% _.each(operators, function (option, key) { %>\n\n    <% if (values.comp === key) { %>\n    <option value="<%- key %>" selected="selected"><%- option %></option>\n    <% } else { %>\n    <option value="<%- key %>"><%- option %></option>\n    <% } %>\n\n    <% }); %>\n</select>\n\n<select name="ftr-value.<%- inputIndex %>" class="form-control filter-value filter-input input-sm">\n    <option value=""></option>\n\n    <% _.each(options, function (option) { %>\n\n    <% if (parseInt(values.value, 10) === option.value) { %>\n    <option value="<%- option.value %>" selected="selected"><%- option.title %></option>\n    <% } else { %>\n    <option value="<%- option.value %>"><%- option.title %></option>\n    <% } %>\n\n    <% }); %>\n</select>\n'},146:function(t,e){t.exports='<%\nvar options = {\n    \'is-less-than\': \'is less than\',\n    \'is\':           \'is\',\n    \'is-more-than\': \'is more than\',\n    \'is-between\':   \'is between\'\n};\n%>\n\n<select name="ftr-comp.<%- inputIndex %>" class="form-control input-sm">\n    <% _.each(options, function (option, key) { %>\n\n    <% if (values.comp === key) { %>\n    <option value="<%- key %>" selected="selected"><%- option %></option>\n    <% } else { %>\n    <option value="<%- key %>"><%- option %></option>\n    <% } %>\n\n    <% }); %>\n</select>\n\n<span class="filter-numeric-inputs">\n    <input class="filter-operand1 form-control input-sm" name="ftr-operand1.<%- inputIndex %>" step="any" type="number"\n        value="<%- values.operand1 %>" />\n\n    <span class="filter-numeric-operand2-wrapper">\n        <span class="text-muted">&nbsp; and &nbsp;</span>\n        <input class="filter-operand2 form-control input-sm" name="ftr-operand2.<%- inputIndex %>" step="any"\n            type="number" value="<%- values.operand2 %>" />\n    </span>\n</span>\n\n'},147:function(t,e){t.exports='<%\nvar operators = {\n    "is":        "is",\n    "is-not":    "is not",\n    "empty":     "is empty",\n    "not-empty": "is not empty"\n};\n%>\n\n<select name="ftr-comp.<%- inputIndex %>" class="form-control filter-op input-sm">\n    <% _.each(operators, function (option, key) { %>\n\n    <% if (values.comp === key) { %>\n    <option value="<%- key %>" selected="selected"><%- option %></option>\n    <% } else { %>\n    <option value="<%- key %>"><%- option %></option>\n    <% } %>\n\n    <% }); %>\n</select>\n\n<select name="ftr-value.<%- inputIndex %>" class="form-control filter-value filter-input input-sm">\n    <option value=""></option>\n\n    <% _.each(options, function (option, key) { %>\n\n    <% if (parseInt(values.value, 10) === option.value) { %>\n    <option value="<%- option.value %>" selected="selected"><%- option.title %></option>\n    <% } else { %>\n    <option value="<%- option.value %>"><%- option.title %></option>\n    <% } %>\n\n    <% }); %>\n</select>\n'},148:function(t,e){t.exports='<%\nvar options = {\n    \'contains\':         \'contains\',\n    \'does-not-contain\': \'does not contain\',\n    \'starts-with\':      \'starts with\',\n    \'ends-with\':        \'ends with\'\n};\n%>\n\n<select name="ftr-comp.<%- inputIndex %>" class="form-control input-sm">\n    <% _.each(options, function (option, key) { %>\n\n    <% if (values.comp === key) { %>\n    <option value="<%- key %>" selected="selected"><%- option %></options>\n    <% } else { %>\n    <option value="<%- key %>"><%- option %></options>\n    <% } %>\n\n    <% }); %>\n</select>\n\n<input name="ftr-value.<%- inputIndex %>" type="text" class="filter-value form-control input-sm" value="<%- values.value %>" />\n'},156:function(t,e,n){"use strict";var i=n(140),s=n.n(i),r=n(117),o=n.n(r),a=s.a.Model.extend({defaults:{id:"",label:"",type:"",options:{},defaults:{}}}),l=s.a.Collection.extend({model:a,loadConfigFromGlobalVariable:function(t){var e="FILTER_FIELDS";if(t&&(e=t+e),void 0===window[e])throw"Could not find initial config for filter form";o.a.each(window[e],function(t){this.add(t)},this)}});e.a=l},157:function(t,e,n){"use strict";var i=n(140),s=n.n(i),r=n(117),o=n.n(r),a=n(162),l=n(142),u=n.n(l),h=$("#filter-template").text(),c=o.a.template(h||u.a),d=s.a.View.extend({events:{"change .filter-field":"selectField","click .js-add":"addFilter","click .js-remove":"removeFilter"},className:"filter-row",fields:null,selected:null,initialize:function(t,e){this.fields=t.fields,this.selected=this.model.get("field"),this.index=t.index},render:function(){if(this.$el.html(c({fields:this.fields.toJSON(),selected:this.selected,index:this.index})),this.selected){var t=this.fields.findWhere({id:this.selected}),e=this.model.get("values");o.a.each(t.get("defaults"),function(t,n){void 0===e[n]&&(e[n]=t)}),this.model.set("values",e),this.$el.find(".filter-control-wrapper").html(n.i(a.a)(t.get("type"),t.get("options"),this.model,this.index).render().el)}return 1===this.collection.length&&this.$el.find(".btn-remove").attr("disabled","disabled"),this},selectField:function(t){this.selected=this.$el.find(".filter-field").val(),this.model.set("field",this.selected),this.render()},addFilter:function(t){t.preventDefault(),this.collection.add({})},removeFilter:function(t){t.preventDefault(),this.model.destroy()}});e.a=d},158:function(t,e,n){"use strict";var i=n(140),s=n.n(i),r=n(117),o=n.n(r),a=s.a.Model.extend({defaults:{field:"",isNew:!0,values:{}}}),l=s.a.Collection.extend({model:a,loadValuesFromGlobalVariable:function(t){var e="FILTER_VALUES";if(t&&(e=t+e),void 0===window[e])throw"Could not find initial values for filter form";o.a.each(window[e],function(t,e){var n={field:t.id,isNew:!1,values:t};this.add(n)},this)}});e.a=l},159:function(t,e,n){"use strict";var i=n(157),s=n(140),r=n.n(s),o=r.a.View.extend({fields:null,initialize:function(t,e){this.fields=t.fields,this.collection.on("add remove",this.render,this)},render:function(){return this.$el.empty(),this.collection.each(function(t,e){var n=new i.a({collection:this.collection,fields:this.fields,model:t,index:e});this.$el.append(n.render().el)},this),this}});e.a=o},160:function(t,e,n){"use strict";var i=n(139),s=n(143),r=n.n(s),o=n(117),a=n.n(o),l=a.a.template(r.a),u=i.a.extend({template:l,updateValues:function(){this.model.set("values",{value:this.$el.find("select").val()})}});e.a=u},161:function(t,e,n){"use strict";var i=n(139),s=n(144),r=n.n(s),o=n(117),a=n.n(o),l=a.a.template(r.a),u=i.a.extend({template:l,singleInputOperators:["on-or-before","before","on-or-after","after","is"],doubleInputOperators:["between"],noInputOperators:["today","yesterday","this-week","this-month","this-year"],events:{"change select":"handleOperatorSelection","blur input":"updateValues","change input":"updateValues"},postRender:function(){this.handleOperatorSelection()},handleOperatorSelection:function(){var t=this.$el.find("select").val();this.focusInput(),this.updateValues(),-1!==this.singleInputOperators.indexOf(t)?(this.$el.find(".filter-date-inputs").show(),this.$el.find(".filter-date-end-wrapper").hide()):-1!==this.noInputOperators.indexOf(t)?this.$el.find(".filter-date-inputs").hide():(this.$el.find(".filter-date-inputs").show(),this.$el.find(".filter-date-end-wrapper").show())},updateValues:function(){this.model.set("values",{comp:this.$el.find("select").val(),start:this.$el.find("input.filter-start").val(),end:this.$el.find("input.filter-end").val()})}});e.a=u},162:function(t,e,n){"use strict";var i=n(160),s=n(161),r=n(164),o=n(166),a=n(165),l=n(163),u={boolean:i.a,date:s.a,numeric:r.a,text:o.a,reference:a.a,manytomany:l.a},h=function(t,e,n,i){return e||(e={}),e.inputIndex=i,e.model=n,new u[t](e)};e.a=h},163:function(t,e,n){"use strict";var i=n(139),s=n(145),r=n.n(s),o=n(117),a=n.n(o),l=a.a.template(r.a),u=i.a.extend({template:l,inputOperators:["contains","not-contains"],noInputOperators:["is-empty","is-not-empty"],events:{"change select":"handleOperatorSelection"},postRender:function(){this.handleOperatorSelection()},updateValues:function(){this.model.set("values",{comp:this.$el.find("select").val(),value:this.$el.find("select.filter-value").val()})},handleOperatorSelection:function(){var t=this.$el.find(".filter-op").val();this.focusInput(),this.updateValues(),-1!==this.inputOperators.indexOf(t)?this.$el.find(".filter-input").show():-1!==this.noInputOperators.indexOf(t)&&this.$el.find(".filter-input").hide()}});e.a=u},164:function(t,e,n){"use strict";var i=n(139),s=n(146),r=n.n(s),o=n(117),a=n.n(o),l=a.a.template(r.a),u=i.a.extend({template:l,singleInputOperators:["is-less-than","is","is-more-than"],doubleInputOperators:["is-between"],events:{"change select":"handleOperatorSelection","blur input":"updateValues","change input":"updateValues"},handleOperatorSelection:function(){var t=this.$el.find("select").val();this.focusInput(),this.updateValues(),-1!==this.singleInputOperators.indexOf(t)?(this.$el.find(".filter-numeric-inputs").show(),this.$el.find(".filter-numeric-operand2-wrapper").hide()):(this.$el.find(".filter-numeric-inputs").show(),this.$el.find(".filter-numeric-operand2-wrapper").show())},postRender:function(){this.handleOperatorSelection()},updateValues:function(){this.model.set("values",{comp:this.$el.find("select").val(),operand1:this.$el.find("input.filter-operand1").val(),operand2:this.$el.find("input.filter-operand2").val()})}});e.a=u},165:function(t,e,n){"use strict";var i=n(139),s=n(147),r=n.n(s),o=n(117),a=n.n(o),l=a.a.template(r.a),u=i.a.extend({template:l,inputOperators:["is","is-not"],noInputOperators:["empty","not-empty"],events:{"change select":"handleOperatorSelection"},postRender:function(){this.handleOperatorSelection()},updateValues:function(){this.model.set("values",{comp:this.$el.find("select").val(),value:this.$el.find("select.filter-value").val()})},handleOperatorSelection:function(){var t=this.$el.find(".filter-op").val();this.focusInput(),this.updateValues(),-1!==this.inputOperators.indexOf(t)?this.$el.find(".filter-input").show():-1!==this.noInputOperators.indexOf(t)&&this.$el.find(".filter-input").hide()}});e.a=u},166:function(t,e,n){"use strict";var i=n(139),s=n(148),r=n.n(s),o=n(117),a=n.n(o),l=a.a.template(r.a),u=i.a.extend({template:l,updateValues:function(){this.model.set("values",{comp:this.$el.find("select").val(),value:this.$el.find("input.filter-value").val()})}});e.a=u},176:function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n}});
//# sourceMappingURL=0.js.map