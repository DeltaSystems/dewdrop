<?php
use Dewdrop\Fields\Helper\SelectFilter;

// Note: these are overridden via JS when using the DataTables Listing Handler

$renderHiddenInput = function($name, $value) {
    printf(
        '<input type="hidden" name="%s" value="%s" />',
        $this->escapeHtmlAttr($name),
        $this->escapeHtmlAttr($value)
    );
};

foreach ($this->getRequest()->getQuery() as $param => $value) {
    if (SelectFilter::isQueryStringParamNotRelatedToFiltering($param, $this->paramPrefix)) {
        if (is_array($value)) {
            foreach ($value as $v) {
                $renderHiddenInput($param.'[]', $v);
            }
        } else {
            $renderHiddenInput($param, $value);
        }
    }
}

echo $this->controls;
